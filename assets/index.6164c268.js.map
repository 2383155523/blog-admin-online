{"version":3,"file":"index.6164c268.js","sources":["../../src/components/admin/routeContent/components/comment/index.vue"],"sourcesContent":["<script lang=\"ts\" setup>\r\nimport { ref, h, computed, unref, onMounted, watch } from \"vue\";\r\nimport { NDataTable, NInput, NButton } from \"naive-ui\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { isPC } from \"@/hooks/resize\";\r\nconst router = useRouter();\r\nconst pagination = {\r\n  pageSize: 12,\r\n};\r\nconst store = useStore();\r\nconst checkedRowKeysRef = ref([]);\r\nconst sortStatesRef = ref([]);\r\nconst classifyBox = ref<null | HTMLElement>(null);\r\nconst tableMaxHeight = ref<string>(\"\");\r\n// offsetHeight\r\nconst initTableMaxHeight = () => {\r\n  tableMaxHeight.value = classifyBox.value.offsetHeight - 170 + \"\";\r\n};\r\n\r\nonMounted(() => {\r\n  initTableMaxHeight();\r\n});\r\nconst sortKeyMapOrderRef = computed(() =>\r\n  sortStatesRef.value.reduce((result, { columnKey, order }) => {\r\n    result[columnKey] = order;\r\n    return result;\r\n  }, {})\r\n);\r\n\r\nconst handleCheck = (rowKeys) => {\r\n  checkedRowKeysRef.value = rowKeys;\r\n};\r\nconst createData = (len: number) => {\r\n  const dataArr = [];\r\n  for (let i = 0; i < len; i++) {\r\n    dataArr.push({\r\n      Id: i,\r\n      Content: `content${i}`,\r\n      ArticleName: `ArticleName${i}`,\r\n      ReplyId: i + 3,\r\n      UserName: `User${i}`,\r\n      ReplysTotal: i * 10,\r\n      Date: new Date().toLocaleString(),\r\n      isEdit: false,\r\n    });\r\n  }\r\n  return dataArr;\r\n};\r\n\r\nconst data = ref(createData(200));\r\n\r\nconst headers = computed(() => [\r\n  {\r\n    type: \"selection\",\r\n  },\r\n  {\r\n    title: \"Content\",\r\n    key: \"Content\",\r\n    align: \"center\",\r\n    ellipsis: {\r\n      tooltip: true,\r\n    },\r\n    render(row, index) {\r\n      if (row.isEdit) {\r\n        return h(NInput, {\r\n          value: row.Content,\r\n          onUpdateValue(v) {\r\n            data.value[index].Content = v;\r\n          },\r\n          onKeyup(e) {\r\n            if (e.code == \"Enter\") {\r\n              const { Id, Content } = unref(row);\r\n              row.isEdit = false;\r\n              console.log(Id, Content);\r\n              // console.log(id);\r\n            }\r\n          },\r\n        });\r\n      } else {\r\n        return h(\"div\", row.Content);\r\n      }\r\n    },\r\n  },\r\n  {\r\n    title: \"ArticleName\",\r\n    key: \"ArticleName\",\r\n    align: \"center\",\r\n  },\r\n  {\r\n    title: \"ReplyId\",\r\n    key: \"ReplyId\",\r\n    align: \"center\",\r\n  },\r\n  {\r\n    title: \"UserName\",\r\n    key: \"UserName\",\r\n    align: \"center\",\r\n  },\r\n  {\r\n    title: \"Date\",\r\n    key: \"Date\",\r\n    align: \"center\",\r\n    ellipsis: {\r\n      tooltip: true,\r\n    },\r\n  },\r\n  {\r\n    title: \"ReplysTotal\",\r\n    key: \"ReplysTotal\",\r\n    align: \"center\",\r\n    sortOrder: sortKeyMapOrderRef.value.ReplysTotal || false,\r\n    sorter(rowA, rowB) {\r\n      return rowA.ReplysTotal - rowB.ReplysTotal;\r\n    },\r\n  },\r\n  {\r\n    title: \"Action\",\r\n    key: \"Action\",\r\n    align: \"center\",\r\n    render(row, index) {\r\n      const editArticle = () => {\r\n        row.isEdit = !row.isEdit;\r\n      };\r\n      const deleteArticle = () => {\r\n        console.log(\"delete\");\r\n      };\r\n      const goDetail = () => {};\r\n      return h(\r\n        \"div\",\r\n        {\r\n          class: \"action\",\r\n        },\r\n        {\r\n          default() {\r\n            return [\r\n              h(\r\n                NButton,\r\n                {\r\n                  onClick: editArticle,\r\n                  type: \"primary\",\r\n\r\n                  style: `margin-right:20px;margin-bottom:${\r\n                    isPC.value ? \"0\" : \"10px\"\r\n                  }`,\r\n                },\r\n                {\r\n                  default() {\r\n                    return row.isEdit ? \"Cancel\" : \"Edit\";\r\n                  },\r\n                }\r\n              ),\r\n              h(\r\n                NButton,\r\n                { onClick: deleteArticle, type: \"error\" },\r\n                {\r\n                  default() {\r\n                    return \"Delete\";\r\n                  },\r\n                }\r\n              ),\r\n            ];\r\n          },\r\n        }\r\n      );\r\n    },\r\n  },\r\n]);\r\nfunction handleUpdateSorter(sorters) {\r\n  console.log(sorters);\r\n  sortStatesRef.value = [].concat(sorters);\r\n}\r\nconst searchArticleKey = ref<string | null>(null); //博文名 查询关键字\r\nconst searchUserKey = ref<string | null>(null); //用户名 查询关键字\r\nconst searchReplyIdKey = ref<string | null>(null); //用户名 查询关键字\r\nconst coypData = unref(data);\r\nwatch(searchArticleKey, (newVal) => {\r\n  if (newVal == \"\") {\r\n    data.value = coypData;\r\n  }\r\n  data.value = unref(data).filter((item) =>\r\n    item.ArticleName.toLocaleLowerCase().includes(newVal.trim().toLowerCase())\r\n  );\r\n});\r\nwatch(searchUserKey, (newVal) => {\r\n  if (newVal == \"\") {\r\n    data.value = coypData;\r\n  }\r\n  data.value = unref(data).filter((item) =>\r\n    item.UserName.toLocaleLowerCase().includes(newVal.trim().toLowerCase())\r\n  );\r\n});\r\nwatch(searchReplyIdKey, (newVal) => {\r\n  if (newVal == \"\") {\r\n    data.value = coypData;\r\n  }\r\n  data.value = unref(data).filter((item) =>\r\n    item.ReplyId.toString().includes(newVal.trim())\r\n  );\r\n});\r\n</script>\r\n<template>\r\n  <div\r\n    class=\"classifyBox\"\r\n    ref=\"classifyBox\"\r\n    :style=\"{\r\n      background: store.state.theme == 'light' ? '#fff' : '#333',\r\n    }\"\r\n  >\r\n    <div style=\"margin-bottom: 20px\" class=\"actions\">\r\n      <n-button type=\"error\" style=\"margin-right: 30px\">DeleteAll</n-button>\r\n      <n-input\r\n        v-model:value=\"searchArticleKey\"\r\n        type=\"text\"\r\n        placeholder=\"Search About ArticleName\"\r\n        clearable\r\n        style=\"width: 250px; margin-right: 30px\"\r\n        class=\"input\"\r\n      />\r\n      <n-input\r\n        v-model:value=\"searchUserKey\"\r\n        type=\"text\"\r\n        placeholder=\"Search About UserName\"\r\n        clearable\r\n        style=\"width: 250px; margin-right: 30px\"\r\n        class=\"input\"\r\n      />\r\n      <n-input\r\n        v-model:value=\"searchReplyIdKey\"\r\n        type=\"text\"\r\n        placeholder=\"Search About ReplyId\"\r\n        clearable\r\n        style=\"width: 250px\"\r\n        class=\"input\"\r\n      />\r\n    </div>\r\n    <n-data-table\r\n      :columns=\"headers\"\r\n      :data=\"data\"\r\n      :pagination=\"pagination\"\r\n      :row-key=\"(row) => row.Id\"\r\n      @update:checked-row-keys=\"handleCheck\"\r\n      @update:sorter=\"handleUpdateSorter\"\r\n      striped\r\n      :max-height=\"tableMaxHeight\"\r\n    >\r\n    </n-data-table>\r\n  </div>\r\n</template>\r\n<style lang=\"scss\" scoped>\r\n.classifyBox {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 4px;\r\n  box-sizing: border-box;\r\n  padding: 15px 10px;\r\n  transition: background-color 0.3s var(--n-bezier);\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .actions .input {\r\n    margin-top: 20px;\r\n  }\r\n}\r\n</style>\r\n"],"names":[],"mappings":"gVAMe,SACT,GAAa,CACjB,SAAU,IAEN,EAAQ,IACR,EAAoB,EAAI,IACxB,EAAgB,EAAI,IACpB,EAAc,EAAwB,MACtC,EAAiB,EAAY,IAE7B,EAAqB,IAAM,GAChB,MAAQ,EAAY,MAAM,aAAe,IAAM,MAGtD,IAAM,YAGV,GAAqB,EAAS,IAClC,EAAc,MAAM,OAAO,CAAC,EAAQ,CAAE,YAAW,cACxC,GAAa,EACb,GACN,KAGC,EAAc,AAAC,GAAY,GACb,MAAQ,GAmBtB,EAAO,EAAI,AAjBE,CAAC,GAAgB,MAC5B,GAAU,UACP,GAAI,EAAG,EAAI,EAAK,MACf,KAAK,CACX,GAAI,EACJ,QAAS,UAAU,IACnB,YAAa,cAAc,IAC3B,QAAS,EAAI,EACb,SAAU,OAAO,IACjB,YAAa,EAAI,GACjB,KAAM,GAAI,QAAO,iBACjB,OAAQ,WAGL,KAGmB,MAEtB,EAAU,EAAS,IAAM,CAC7B,CACE,KAAM,aAER,CACE,MAAO,UACP,IAAK,UACL,MAAO,SACP,SAAU,CACR,QAAS,IAEX,OAAO,EAAK,EAAO,OACb,GAAI,OACC,EAAE,EAAQ,CACf,MAAO,EAAI,QACX,cAAc,EAAG,GACV,MAAM,GAAO,QAAU,GAE9B,QAAQ,EAAG,IACL,EAAE,MAAQ,QAAS,MACf,CAAE,KAAI,WAAY,EAAM,KAC1B,OAAS,WACL,IAAI,EAAI,OAMf,EAAE,MAAO,EAAI,WAI1B,CACE,MAAO,cACP,IAAK,cACL,MAAO,UAET,CACE,MAAO,UACP,IAAK,UACL,MAAO,UAET,CACE,MAAO,WACP,IAAK,WACL,MAAO,UAET,CACE,MAAO,OACP,IAAK,OACL,MAAO,SACP,SAAU,CACR,QAAS,KAGb,CACE,MAAO,cACP,IAAK,cACL,MAAO,SACP,UAAW,EAAmB,MAAM,aAAe,GACnD,OAAO,EAAM,EAAM,OACV,GAAK,YAAc,EAAK,cAGnC,CACE,MAAO,SACP,IAAK,SACL,MAAO,SACP,OAAO,EAAK,EAAO,MACX,GAAc,IAAM,GACpB,OAAS,CAAC,EAAI,QAEd,EAAgB,IAAM,SAClB,IAAI,iBAGP,GACL,MACA,CACE,MAAO,UAET,CACE,SAAU,OACD,CACL,EACE,EACA,CACE,QAAS,EACT,KAAM,UAEN,MAAO,mCACL,EAAK,MAAQ,IAAM,UAGvB,CACE,SAAU,OACD,GAAI,OAAS,SAAW,UAIrC,EACE,EACA,CAAE,QAAS,EAAe,KAAM,SAChC,CACE,SAAU,OACD,+BAWC,EAAS,SAC3B,IAAI,KACE,MAAQ,GAAG,OAAO,QAE5B,GAAmB,EAAmB,MACtC,EAAgB,EAAmB,MACnC,EAAmB,EAAmB,MACtC,EAAW,EAAM,YACjB,EAAkB,AAAC,GAAW,CAC9B,GAAU,OACP,MAAQ,KAEV,MAAQ,EAAM,GAAM,OAAO,AAAC,GAC/B,EAAK,YAAY,oBAAoB,SAAS,EAAO,OAAO,oBAG1D,EAAe,AAAC,GAAW,CAC3B,GAAU,OACP,MAAQ,KAEV,MAAQ,EAAM,GAAM,OAAO,AAAC,GAC/B,EAAK,SAAS,oBAAoB,SAAS,EAAO,OAAO,oBAGvD,EAAkB,AAAC,GAAW,CAC9B,GAAU,OACP,MAAQ,KAEV,MAAQ,EAAM,GAAM,OAAO,AAAC,GAC/B,EAAK,QAAQ,WAAW,SAAS,EAAO"}