{"version":3,"file":"index.7421b81b.js","sources":["../../src/components/admin/routeContent/components/friends/index.vue"],"sourcesContent":["<script lang=\"ts\" setup>\r\nimport { ref, h, computed, unref, onMounted, watch } from \"vue\";\r\nimport { NDataTable, NInput, NButton } from \"naive-ui\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRouter } from \"vue-router\";\r\nconst router = useRouter();\r\nimport { isPC } from \"@/hooks/resize\";\r\nconst pagination = {\r\n  pageSize: 12,\r\n};\r\nconst store = useStore();\r\nconst checkedRowKeysRef = ref([]);\r\nconst sortStatesRef = ref([]);\r\nconst firendBox = ref<null | HTMLElement>(null);\r\nconst tableMaxHeight = ref<string>(\"\");\r\n// offsetHeight\r\nconst initTableMaxHeight = () => {\r\n  tableMaxHeight.value = firendBox.value.offsetHeight - 170 + \"\";\r\n};\r\n\r\nonMounted(() => {\r\n  initTableMaxHeight();\r\n});\r\nconst sortKeyMapOrderRef = computed(() =>\r\n  sortStatesRef.value.reduce((result, { columnKey, order }) => {\r\n    result[columnKey] = order;\r\n    return result;\r\n  }, {})\r\n);\r\n\r\nconst handleCheck = (rowKeys) => {\r\n  checkedRowKeysRef.value = rowKeys;\r\n};\r\nconst createData = (len: number) => {\r\n  const dataArr = [];\r\n  for (let i = 0; i < len; i++) {\r\n    dataArr.push({\r\n      Id: i,\r\n      Name: `name${i}`,\r\n      Date: new Date().toLocaleString(),\r\n      AvatarUrl: `https://${i}`,\r\n      BlogUrl: `https://blogaaaaaaaaaaaaaaaaaaaa/${i}`,\r\n      Motto: `Motto${i}`,\r\n      BlogImg: `https://blogImg/${i}`,\r\n      isEdit: false,\r\n    });\r\n  }\r\n  return dataArr;\r\n};\r\n\r\nconst data = ref(createData(200));\r\n\r\nconst headers = computed(() => [\r\n  {\r\n    type: \"selection\",\r\n  },\r\n  {\r\n    title: \"Id\",\r\n    key: \"Id\",\r\n    align: \"center\",\r\n  },\r\n  {\r\n    title: \"Name\",\r\n    key: \"Name\",\r\n    align: \"center\",\r\n    ellipsis: {\r\n      tooltip: true,\r\n    },\r\n    render(row, index) {\r\n      if (row.isEdit) {\r\n        return h(NInput, {\r\n          value: row.Name,\r\n          onUpdateValue(v) {\r\n            data.value[index].Name = v;\r\n          },\r\n          onKeyup(e) {\r\n            if (e.code == \"Enter\") {\r\n              const { Id, Name } = unref(row);\r\n              row.isEdit = false;\r\n              console.log(Id, Name);\r\n              // console.log(id);\r\n            }\r\n          },\r\n        });\r\n      } else {\r\n        return h(\"div\", row.Name);\r\n      }\r\n    },\r\n  },\r\n  {\r\n    title: \"AvatarUrl\",\r\n    key: \"AvatarUrl\",\r\n    align: \"center\",\r\n    ellipsis: {\r\n      tooltip: true,\r\n    },\r\n    render(row, index) {\r\n      if (row.isEdit) {\r\n        return h(NInput, {\r\n          value: row.AvatarUrl,\r\n          onUpdateValue(v) {\r\n            data.value[index].AvatarUrl = v;\r\n          },\r\n          onKeyup(e) {\r\n            if (e.code == \"Enter\") {\r\n              const { Id, AvatarUrl } = unref(row);\r\n              row.isEdit = false;\r\n            }\r\n          },\r\n        });\r\n      } else {\r\n        return h(\"div\", row.AvatarUrl);\r\n      }\r\n    },\r\n  },\r\n  {\r\n    title: \"BlogUrl\",\r\n    key: \"BlogUrl\",\r\n    align: \"center\",\r\n    ellipsis: {\r\n      tooltip: true,\r\n    },\r\n    render(row, index) {\r\n      if (row.isEdit) {\r\n        return h(NInput, {\r\n          value: row.BlogUrl,\r\n          onUpdateValue(v) {\r\n            data.value[index].BlogUrl = v;\r\n          },\r\n          onKeyup(e) {\r\n            if (e.code == \"Enter\") {\r\n              const { Id, BlogUrl } = unref(row);\r\n              row.isEdit = false;\r\n            }\r\n          },\r\n        });\r\n      } else {\r\n        return h(\"div\", row.BlogUrl);\r\n      }\r\n    },\r\n  },\r\n  {\r\n    title: \"Motto\",\r\n    key: \"Motto\",\r\n    ellipsis: {\r\n      tooltip: true,\r\n    },\r\n    align: \"center\",\r\n    render(row, index) {\r\n      if (row.isEdit) {\r\n        return h(NInput, {\r\n          value: row.Motto,\r\n          onUpdateValue(v) {\r\n            data.value[index].Motto = v;\r\n          },\r\n          onKeyup(e) {\r\n            if (e.code == \"Enter\") {\r\n              const { Id, Motto } = unref(row);\r\n              row.isEdit = false;\r\n            }\r\n          },\r\n        });\r\n      } else {\r\n        return h(\"div\", row.Motto);\r\n      }\r\n    },\r\n  },\r\n  {\r\n    title: \"BlogImg\",\r\n    key: \"BlogImg\",\r\n    ellipsis: {\r\n      tooltip: true,\r\n    },\r\n    align: \"center\",\r\n    render(row, index) {\r\n      if (row.isEdit) {\r\n        return h(NInput, {\r\n          value: row.BlogImg,\r\n          onUpdateValue(v) {\r\n            data.value[index].BlogImg = v;\r\n          },\r\n          onKeyup(e) {\r\n            if (e.code == \"Enter\") {\r\n              const { Id, BlogImg } = unref(row);\r\n              row.isEdit = false;\r\n            }\r\n          },\r\n        });\r\n      } else {\r\n        return h(\"div\", row.BlogImg);\r\n      }\r\n    },\r\n  },\r\n  {\r\n    title: \"Date\",\r\n    key: \"Date\",\r\n    align: \"center\",\r\n    ellipsis: {\r\n      tooltip: true,\r\n    },\r\n  },\r\n  {\r\n    title: \"Action\",\r\n    key: \"Action\",\r\n    align: \"center\",\r\n    render(row, index) {\r\n      const editArticle = () => {\r\n        row.isEdit = !row.isEdit;\r\n      };\r\n      const deleteArticle = () => {\r\n        console.log(\"delete\");\r\n      };\r\n      const goDetail = () => {};\r\n      return h(\r\n        \"div\",\r\n        {},\r\n        {\r\n          default() {\r\n            return [\r\n              h(\r\n                NButton,\r\n                {\r\n                  onClick: editArticle,\r\n                  type: \"primary\",\r\n                  style: `margin-right:13px;margin-bottom:${\r\n                    isPC.value ? \"0\" : \"10px\"\r\n                  }`,\r\n                },\r\n                {\r\n                  default() {\r\n                    return row.isEdit ? \"Cancel\" : \"Edit\";\r\n                  },\r\n                }\r\n              ),\r\n              h(\r\n                NButton,\r\n                { onClick: deleteArticle, type: \"error\" },\r\n                {\r\n                  default() {\r\n                    return \"Delete\";\r\n                  },\r\n                }\r\n              ),\r\n            ];\r\n          },\r\n        }\r\n      );\r\n    },\r\n  },\r\n]);\r\nfunction handleUpdateSorter(sorters) {\r\n  console.log(sorters);\r\n  sortStatesRef.value = [].concat(sorters);\r\n}\r\nconst search = ref<string | null>(null);\r\nconst coypData = unref(data);\r\nwatch(search, (newVal) => {\r\n  if (newVal == \"\") {\r\n    data.value = coypData;\r\n  }\r\n  data.value = unref(data).filter((item) =>\r\n    item.Name.toLocaleLowerCase().includes(newVal.trim().toLowerCase())\r\n  );\r\n});\r\n</script>\r\n<template>\r\n  <div\r\n    class=\"firendBox\"\r\n    ref=\"firendBox\"\r\n    :style=\"{\r\n      background: store.state.theme == 'light' ? '#fff' : '#333',\r\n    }\"\r\n  >\r\n    <div style=\"margin-bottom: 20px\">\r\n      <n-button type=\"error\" style=\"margin-right: 30px\">DeleteAll</n-button>\r\n      <n-input\r\n        v-model:value=\"search\"\r\n        type=\"text\"\r\n        placeholder=\"Search About Name\"\r\n        clearable\r\n        style=\"width: 200px\"\r\n      />\r\n    </div>\r\n    <n-data-table\r\n      :columns=\"headers\"\r\n      :data=\"data\"\r\n      :pagination=\"pagination\"\r\n      :row-key=\"(row) => row.Id\"\r\n      @update:checked-row-keys=\"handleCheck\"\r\n      @update:sorter=\"handleUpdateSorter\"\r\n      striped\r\n      :max-height=\"tableMaxHeight\"\r\n    >\r\n    </n-data-table>\r\n  </div>\r\n</template>\r\n<style lang=\"scss\" scoped>\r\n.firendBox {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 4px;\r\n  box-sizing: border-box;\r\n  padding: 15px 10px;\r\n  transition: background-color 0.3s var(--n-bezier);\r\n}\r\n</style>\r\n"],"names":[],"mappings":"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"}