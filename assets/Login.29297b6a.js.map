{"version":3,"file":"Login.29297b6a.js","sources":["../../src/mock/login.ts","../../src/components/Login/index.vue"],"sourcesContent":["export interface data {\r\n  admin_userName: string;\r\n  admin_passWord: string;\r\n  name: string;\r\n  userType: string;\r\n}\r\n\r\nexport interface login_mock_data_interface {\r\n  type: string;\r\n  state: boolean;\r\n  data: data;\r\n}\r\n\r\nexport const login_mock_data: login_mock_data_interface = {\r\n  type: \"login\",\r\n  state: true,\r\n  data: {\r\n    admin_userName: \"123\",\r\n    admin_passWord: \"123\",\r\n    name: \"微若蜉蝣\",\r\n    userType: \"超级管理员\",\r\n  },\r\n};\r\n\r\nexport const login: () => login_mock_data_interface = () => {\r\n  return login_mock_data;\r\n};\r\n","<template>\r\n  <div class=\"container-login\">\r\n    <div class=\"title\">博客后台管理面板</div>\r\n    <div class=\"form\">\r\n      <div class=\"input\">\r\n        <div class=\"input-title\">Login</div>\r\n        <div class=\"userName\">\r\n          <input\r\n            type=\"text\"\r\n            class=\"userName-input\"\r\n            v-model=\"userName\"\r\n            @focus=\"userNameFocus\"\r\n            @blur=\"userNameBlur\"\r\n            ref=\"userNameEl\"\r\n          />\r\n          <div\r\n            class=\"placeholder\"\r\n            :class=\"userNameIsFocus ? 'inputFocus' : 'inputBulr'\"\r\n            ref=\"userNamePlaceholderEl\"\r\n          >\r\n            userName\r\n          </div>\r\n        </div>\r\n        <div class=\"passWord\">\r\n          <input\r\n            type=\"password\"\r\n            class=\"passWord-input\"\r\n            v-model=\"passWord\"\r\n            @focus=\"passWordFocus\"\r\n            @blur=\"passWordBlur\"\r\n            ref=\"passWordEl\"\r\n            @keyup.enter=\"submit\"\r\n          />\r\n          <div\r\n            ref=\"passWordPlaceholderEl\"\r\n            class=\"placeholder\"\r\n            :class=\"passWordIsFocus ? 'inputFocus' : 'inputBulr'\"\r\n          >\r\n            passWord\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"submit\">\r\n        <div class=\"button\" @click=\"submit\">登录</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { ref, h } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRouter } from \"vue-router\";\r\nimport { useNotification, NAvatar, NButton, useMessage } from \"naive-ui\";\r\n// import { login } from \"@api/login\"; //真实接口\r\nimport { login } from \"@mock/login\";\r\n\r\nconst message = useMessage();\r\nconst notification = useNotification();\r\nconst store = useStore();\r\nconst router = useRouter();\r\nconst userNameIsFocus = ref<boolean>(false);\r\nconst passWordIsFocus = ref<boolean>(false);\r\nconst userName = ref<string>(\"\"); //用户名\r\nconst passWord = ref<string>(\"\"); //密码\r\nconst userNameEl = ref<any>(null);\r\nconst userNamePlaceholderEl = ref<any>(null);\r\nconst passWordEl = ref<any>(null);\r\nconst passWordPlaceholderEl = ref<any>(null);\r\n\r\nconst submit = async () => {\r\n  //提交登录\r\n  if (!formVerify()) {\r\n    message.warning(\"请填写账号和密码\");\r\n    return;\r\n  }\r\n  window.$loading(); //Loading动画开始加载\r\n  //登录接口逻辑\r\n  // const res = await login({\r\n  //   userName: userName.value,\r\n  //   passWord: passWord.value,\r\n  // });\r\n  //登录Mock接口逻辑\r\n  const res = await login();\r\n  console.log(res);\r\n  if (res.state) {\r\n    //登录成功\r\n    passWord.value = \"\";\r\n    userName.value = \"\";\r\n\r\n    store.commit(\"setIsLogin\", \"true\"); //更改全局登录状态\r\n    store.commit(\"setAdminInfo\", res.data); //全局缓存管理员信息\r\n\r\n    const timer1: any = setTimeout(() => {\r\n      message.success(\"登录成功,正在跳转至首页......\");\r\n      window.$closeLoading(); //关闭Loading动画\r\n      router.push({ path: \"/\" });\r\n      let markAsRead = false;\r\n      const n = notification.create({\r\n        title: \"欢迎首次进入\",\r\n        content: `尊敬的${res.data.userType}:${res.data.name},小蝣对您的首次到来表示热烈欢迎！`,\r\n        meta: new Date().toLocaleString(),\r\n        avatar: () =>\r\n          h(NAvatar, {\r\n            size: \"small\",\r\n            round: false,\r\n            src: \"https://fuyouplus.cn/imgs/tx.jpg\",\r\n          }),\r\n        action: () =>\r\n          h(\r\n            NButton,\r\n            {\r\n              text: true,\r\n              type: \"primary\",\r\n              onClick: () => {\r\n                markAsRead = true;\r\n                n.destroy();\r\n              },\r\n            },\r\n            {\r\n              default: () => \"已读\",\r\n            }\r\n          ),\r\n        onClose: () => {\r\n          if (!markAsRead) {\r\n            message.warning(\"请设为已读\");\r\n            return false;\r\n          }\r\n        },\r\n      });\r\n    }, 2000);\r\n  } else {\r\n    //登录失败\r\n    passWord.value = \"\";\r\n    userName.value = \"\";\r\n    setTimeout(() => {\r\n      message.error(\"登录失败,账号或密码错误\");\r\n      window.$closeLoading();\r\n    }, 2000);\r\n  }\r\n};\r\nconst formVerify = () => {\r\n  //表单验证\r\n  if (userName.value.trim() == \"\") {\r\n    userNameEl.value.style.borderColor = \"#F44336\";\r\n    userNamePlaceholderEl.value.classList.add(\"animate__shakeX\");\r\n  } else {\r\n    userNameEl.value.style.borderColor = \"#fff\";\r\n  }\r\n  if (passWord.value.trim() == \"\") {\r\n    passWordEl.value.style.borderColor = \"#F44336\";\r\n    passWordPlaceholderEl.value.classList.add(\"animate__shakeX\");\r\n  } else {\r\n    passWordEl.value.style.borderColor = \"#fff\";\r\n  }\r\n  setTimeout(() => {\r\n    passWordPlaceholderEl.value.classList.remove(\"animate__shakeX\");\r\n    passWordPlaceholderEl.value.classList.remove(\"animate__shakeX\");\r\n  }, 1000);\r\n  return userName.value.trim() != \"\" && passWord.value.trim() != \"\";\r\n};\r\n\r\nconst userNameBlur = () => {\r\n  //失去焦点\r\n  if (userName.value.trim() == \"\") {\r\n    userNameIsFocus.value = false;\r\n  } else {\r\n    userNameEl.value.style.borderColor = \"#fff\";\r\n  }\r\n};\r\nconst userNameFocus = () => {\r\n  //聚焦\r\n  userNameIsFocus.value = true;\r\n  if (passWord.value.trim() == \"\") {\r\n    passWordIsFocus.value = false;\r\n  }\r\n};\r\nconst passWordBlur = () => {\r\n  //失去焦点\r\n  if (passWord.value.trim() == \"\") {\r\n    passWordIsFocus.value = false;\r\n  } else {\r\n    passWordEl.value.style.borderColor = \"#fff\";\r\n  }\r\n};\r\nconst passWordFocus = () => {\r\n  //聚焦\r\n  passWordIsFocus.value = true;\r\n  if (userName.value.trim() == \"\") {\r\n    userNameIsFocus.value = false;\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped lang=\"scss\">\r\n$border-radius: 6px;\r\n.animate__shakeX {\r\n  animation: shakeX 1s;\r\n  color: #f44336 !important;\r\n}\r\n@mixin center {\r\n  position: absolute;\r\n  top: 50%;\r\n  left: 50%;\r\n  transform: translate(-50%, -50%);\r\n}\r\n@mixin removeInputDefaultStyle {\r\n  background: none;\r\n  border: none;\r\n  outline: none;\r\n}\r\n\r\n@mixin newInputStyle {\r\n  width: 85%;\r\n  color: #fff;\r\n  font-size: 18px;\r\n  box-sizing: border-box;\r\n  padding: 5px;\r\n  border-bottom: 2px solid #fff;\r\n  transition: all 0.3s;\r\n}\r\n.placeholder {\r\n  position: absolute;\r\n  top: -7px;\r\n  left: 5px;\r\n  font-size: 18px;\r\n  color: #97f6c2;\r\n  opacity: 0.7;\r\n  font-weight: bold;\r\n  transition: all 0.3s;\r\n}\r\n.inputFocus {\r\n  font-size: 14px;\r\n  top: -25px;\r\n}\r\n.inputBulr {\r\n  font-size: 18px;\r\n  top: -7px;\r\n}\r\n.container-login {\r\n  width: 100vw;\r\n  height: 100vh;\r\n  background-image: linear-gradient(135deg, #81fbb8 10%, #28c76f 100%);\r\n  position: relative;\r\n  .title {\r\n    font-size: 35px;\r\n    color: #fff;\r\n    letter-spacing: 8px;\r\n    text-align: center;\r\n    transform: translateY(30px);\r\n  }\r\n  .form {\r\n    width: 750px;\r\n    height: 330px;\r\n    display: flex;\r\n    background-image: linear-gradient(135deg, #28c76f 10%, #81fbb8 100%);\r\n    @include center;\r\n    box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px,\r\n      rgba(0, 0, 0, 0.22) 0px 15px 12px;\r\n    border-radius: $border-radius;\r\n    .input {\r\n      flex: 1;\r\n      height: 100%;\r\n      background-image: linear-gradient(135deg, #28c76f 10%, #81fbb8 100%);\r\n      border-top-left-radius: $border-radius;\r\n      border-bottom-left-radius: $border-radius;\r\n      position: relative;\r\n      .input-title {\r\n        font-size: 20px;\r\n        color: #fff;\r\n        border-bottom: 2px solid #e6a23c;\r\n        width: 65px;\r\n        text-align: center;\r\n        margin-top: 50px;\r\n        margin-left: 60px;\r\n      }\r\n      .userName {\r\n        margin-top: 50px;\r\n        margin-left: 60px;\r\n        position: relative;\r\n        .userName-input {\r\n          @include removeInputDefaultStyle;\r\n          @include newInputStyle;\r\n        }\r\n      }\r\n      .passWord {\r\n        margin-top: 60px;\r\n        margin-left: 60px;\r\n        position: relative;\r\n        .passWord-input {\r\n          @include removeInputDefaultStyle;\r\n          @include newInputStyle;\r\n        }\r\n      }\r\n    }\r\n    .submit {\r\n      width: 200px;\r\n      height: 100%;\r\n      background: #28c76f;\r\n      border-top-right-radius: $border-radius;\r\n      border-bottom-right-radius: $border-radius;\r\n      position: relative;\r\n      .button {\r\n        @include center;\r\n        width: 60px;\r\n        height: 60px;\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        border-radius: 50%;\r\n        font-size: 14px;\r\n        color: #fff;\r\n        border: 1px solid #81fbb8;\r\n        cursor: pointer;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":[],"mappings":"qNAaa,GAA6C,CACxD,KAAM,QACN,MAAO,GACP,KAAM,CACJ,eAAgB,MAChB,eAAgB,MAChB,KAAM,2BACN,SAAU,mCAID,EAAyC,IAC7C,qUCgCH,GAAU,IACV,EAAe,IACf,EAAQ,IACR,EAAS,IACT,EAAkB,EAAa,IAC/B,EAAkB,EAAa,IAC/B,EAAW,EAAY,IACvB,EAAW,EAAY,IACvB,EAAa,EAAS,MACtB,EAAwB,EAAS,MACjC,EAAa,EAAS,MACtB,EAAwB,EAAS,MAEjC,EAAS,SAAY,IAErB,CAAC,IAAc,GACT,QAAQ,kEAGX,gBAOD,GAAM,KAAM,aACV,IAAI,GACR,EAAI,SAEG,MAAQ,KACR,MAAQ,KAEX,OAAO,aAAc,UACrB,OAAO,eAAgB,EAAI,MAEb,WAAW,IAAM,GAC3B,QAAQ,oFACT,kBACA,KAAK,CAAE,KAAM,SAChB,GAAa,QACX,GAAI,EAAa,OAAO,CAC5B,MAAO,uCACP,QAAS,qBAAM,EAAI,KAAK,YAAY,EAAI,KAAK,wGAC7C,KAAM,GAAI,QAAO,iBACjB,OAAQ,IACN,EAAE,EAAS,CACT,KAAM,QACN,MAAO,GACP,IAAK,qCAET,OAAQ,IACN,EACE,EACA,CACE,KAAM,GACN,KAAM,UACN,QAAS,IAAM,GACA,KACX,YAGN,CACE,QAAS,IAAM,iBAGrB,QAAS,IAAM,IACT,CAAC,WACK,QAAQ,kCACT,OAIZ,SAGM,MAAQ,KACR,MAAQ,cACN,IAAM,GACP,MAAM,8EACP,iBACN,OAGD,EAAa,KAEb,EAAS,MAAM,QAAU,MAChB,MAAM,MAAM,YAAc,YACf,MAAM,UAAU,IAAI,sBAE/B,MAAM,MAAM,YAAc,OAEnC,EAAS,MAAM,QAAU,MAChB,MAAM,MAAM,YAAc,YACf,MAAM,UAAU,IAAI,sBAE/B,MAAM,MAAM,YAAc,kBAE5B,IAAM,GACO,MAAM,UAAU,OAAO,qBACvB,MAAM,UAAU,OAAO,oBAC5C,KACI,EAAS,MAAM,QAAU,IAAM,EAAS,MAAM,QAAU,IAG3D,EAAe,IAAM,CAErB,EAAS,MAAM,QAAU,KACX,MAAQ,KAEb,MAAM,MAAM,YAAc,QAGnC,EAAgB,IAAM,GAEV,MAAQ,GACpB,EAAS,MAAM,QAAU,OACX,MAAQ,KAGtB,EAAe,IAAM,CAErB,EAAS,MAAM,QAAU,KACX,MAAQ,KAEb,MAAM,MAAM,YAAc,QAGnC,EAAgB,IAAM,GAEV,MAAQ,GACpB,EAAS,MAAM,QAAU,OACX,MAAQ"}