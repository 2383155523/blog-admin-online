{"version":3,"file":"admin.c892329d.js","sources":["../../src/components/admin/v-header/index.vue","../../src/hooks/reload.ts","../../src/components/admin/RouteNav/index.vue","../../src/config/meun.ts","../../src/components/admin/sideMenu/index.vue","../../src/components/admin/routeContent/index.vue","../../src/components/loading/partLoading/index.vue","../../src/views/admin.vue"],"sourcesContent":["<script lang=\"ts\" setup>\r\nimport { ref } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { fullScreenIn, fullScreenOut } from \"@/util/util\";\r\nimport {\r\n  NTooltip,\r\n  NIcon,\r\n  NDrawer,\r\n  NDrawerContent,\r\n  NDivider,\r\n  NColorPicker,\r\n} from \"naive-ui\";\r\nimport {\r\n  ISun,\r\n  IMoon,\r\n  ILock,\r\n  IFullscreenIn,\r\n  IFullscreenOut,\r\n  ISetting,\r\n} from \"@cop/Icons\";\r\nimport setting from \"./components/setting/index.vue\";\r\nimport color from \"@/config/color\";\r\nimport { isPC } from \"@/hooks/resize\";\r\n\r\nconst store = useStore();\r\nconst isFullScreenIn = ref<boolean>(false);\r\nconst drawerIsShow = ref<boolean>(false);\r\nconst settingIsShow = ref<boolean>(false);\r\n\r\nconst fullScreen = () => {\r\n  //全屏\r\n  if (isFullScreenIn.value) {\r\n    fullScreenOut();\r\n  } else {\r\n    fullScreenIn();\r\n  }\r\n  isFullScreenIn.value = !isFullScreenIn.value;\r\n};\r\n\r\nconst changeTheme = () => {\r\n  if (store.state.theme == \"light\") {\r\n    store.commit(\"setTheme\", \"dark\");\r\n\r\n    // bus.$emit(\"theme\", \"dark\");\r\n  } else {\r\n    store.commit(\"setTheme\", \"light\");\r\n    // bus.$emit(\"theme\", \"light\");\r\n  }\r\n};\r\nconst changeThemeColor = (value: string) => {\r\n  store.commit(\"setThemeColor\", value);\r\n};\r\n</script>\r\n<template>\r\n  <div class=\"header\" :class=\"store.state.theme + '-header-background'\">\r\n    <div class=\"title\">\r\n      <span class=\"title-text\">{{ store.state.adminInfo.name }}</span>\r\n    </div>\r\n    <div class=\"logo\">\r\n      <a href=\"https://fuyouplus.cn/\" target=\"_blank\"\r\n        ><img src=\"https://fuyouplus.cn/imgs/tx.jpg\" alt=\"\"\r\n      /></a>\r\n    </div>\r\n    <div class=\"util\">\r\n      <n-tooltip trigger=\"hover\">\r\n        <template #trigger>\r\n          <i-setting\r\n            size=\"22\"\r\n            :color=\"store.state.theme == 'light' ? '#333' : '#fff'\"\r\n            @click=\"settingIsShow = true\"\r\n          />\r\n        </template>\r\n        系统配置\r\n      </n-tooltip>\r\n      <n-tooltip trigger=\"hover\">\r\n        <template #trigger>\r\n          <i-fullscreen-in\r\n            size=\"22\"\r\n            :color=\"store.state.theme == 'light' ? '#333' : '#fff'\"\r\n            v-if=\"!isFullScreenIn\"\r\n            @click=\"fullScreen\"\r\n          />\r\n          <i-fullscreen-out\r\n            size=\"22\"\r\n            :color=\"store.state.theme == 'light' ? '#333' : '#fff'\"\r\n            v-else\r\n            @click=\"fullScreen\"\r\n          />\r\n        </template>\r\n\r\n        {{ isFullScreenIn ? \"退出全屏\" : \"进入全屏\" }}\r\n      </n-tooltip>\r\n\r\n      <n-tooltip trigger=\"hover\">\r\n        <template #trigger>\r\n          <i-lock\r\n            size=\"22\"\r\n            :color=\"store.state.theme == 'light' ? '#333' : '#fff'\"\r\n          />\r\n        </template>\r\n        锁屏休息\r\n      </n-tooltip>\r\n      <n-tooltip trigger=\"hover\">\r\n        <template #trigger>\r\n          <i-moon\r\n            size=\"22\"\r\n            @click=\"changeTheme\"\r\n            v-if=\"store.state.theme == 'light'\"\r\n            :color=\"store.state.theme == 'light' ? '#333' : '#fff'\"\r\n          />\r\n          <i-sun\r\n            size=\"22\"\r\n            @click=\"changeTheme\"\r\n            :color=\"store.state.theme == 'light' ? '#333' : '#fff'\"\r\n            v-else\r\n          />\r\n        </template>\r\n        {{ store.state.theme == \"light\" ? \"深色模式\" : \"浅色模式\" }}\r\n      </n-tooltip>\r\n    </div>\r\n  </div>\r\n  <n-drawer v-model:show=\"settingIsShow\" :width=\"300\">\r\n    <n-drawer-content closable>\r\n      <template #header>\r\n        <div class=\"settingHeader\">项目设置</div>\r\n      </template>\r\n      <template #default>\r\n        <n-divider title-placement=\"center\">主题色设置</n-divider>\r\n        <n-color-picker\r\n          :show-preview=\"true\"\r\n          placement=\"bottom\"\r\n          :swatches=\"color\"\r\n          :default-value=\"store.state.themeColor\"\r\n          @update:value=\"changeThemeColor\"\r\n        />\r\n      </template>\r\n    </n-drawer-content>\r\n  </n-drawer>\r\n</template>\r\n<style lang=\"scss\" scoped>\r\n@import url(\"./theme/dark.scss\");\r\n@import url(\"./theme/light.scss\");\r\n.settingHeader {\r\n  font-size: 16px;\r\n}\r\n.header {\r\n  width: 100vw;\r\n  height: 8vh;\r\n  line-height: 8vh;\r\n  box-shadow: rgba(50, 50, 93, 0.25) 0px 13px 27px -5px,\r\n    rgba(0, 0, 0, 0.3) 0px 8px 16px -8px;\r\n  display: flex;\r\n  position: relative;\r\n  z-index: 2;\r\n  transition: background-color 0.3s var(--n-bezier);\r\n  .logo {\r\n    position: relative;\r\n    flex: 1;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    a {\r\n      width: 60px;\r\n      height: 60px;\r\n    }\r\n    img {\r\n      width: 60px;\r\n      height: 60px;\r\n      border-radius: 4px;\r\n      cursor: var(--cursor-B);\r\n      box-shadow: rgba(0, 0, 0, 0.25) 0px 14px 28px,\r\n        rgba(0, 0, 0, 0.22) 5px 0px 10px;\r\n    }\r\n  }\r\n  .title {\r\n    flex: 1;\r\n    .title-text {\r\n      margin-left: 40px;\r\n      color: var(--themeColor);\r\n      letter-spacing: 2px;\r\n      font-size: 25px;\r\n      font-weight: bold;\r\n    }\r\n  }\r\n  .util {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: row-reverse;\r\n    align-items: center;\r\n    i {\r\n      margin-right: 50px;\r\n    }\r\n  }\r\n}\r\n\r\n@media (max-width: 768px) {\r\n  .title {\r\n    display: none;\r\n  }\r\n  .logo {\r\n    justify-content: start !important;\r\n    margin-left: 10px;\r\n  }\r\n  a {\r\n    width: 50px !important;\r\n    height: 50px !important;\r\n  }\r\n  img {\r\n    width: 50px !important;\r\n    height: 50px !important;\r\n  }\r\n}\r\n</style>\r\n","import { ref, nextTick } from \"vue\";\r\n\r\nexport const routeIsAlive = ref<boolean>(true);\r\n\r\nexport const reload = (loadingBar) => {\r\n  loadingBar.start();\r\n  routeIsAlive.value = false;\r\n  nextTick(() => {\r\n    const timer = setTimeout(() => {\r\n      clearTimeout(timer);\r\n      loadingBar.finish();\r\n      routeIsAlive.value = true;\r\n    }, 2500);\r\n  });\r\n};\r\n","<template>\r\n  <div class=\"routeContainer\">\r\n    <div class=\"routeNav\">\r\n      <span\r\n        class=\"routerItem\"\r\n        :key=\"index\"\r\n        @click=\"link(item.path)\"\r\n        :class=\"{\r\n          currentRouterItem: route.path == item.path,\r\n        }\"\r\n        v-for=\"(item, index) in store.state.routeStack\"\r\n        :style=\"{\r\n          background:\r\n            $store.state.theme == 'light'\r\n              ? 'var(--lightBlockBgColor)'\r\n              : 'var(--darkBlockBgColor)',\r\n          color:\r\n            $store.state.theme == 'light'\r\n              ? 'var(--lightTextColor)'\r\n              : 'var(--darkTextColor)',\r\n        }\"\r\n      >\r\n        {{ item.title }}\r\n        <i-close\r\n          :color=\"$store.state.theme == 'light' ? '#333' : '#fff'\"\r\n          v-if=\"item.canItBeClosed\"\r\n          @click.stop=\"closeRouter(index)\"\r\n          :class=\"{\r\n            currentRouterItem: route.path == item.path,\r\n          }\"\r\n          class=\"icon\"\r\n        />\r\n      </span>\r\n    </div>\r\n    <div\r\n      class=\"routerSetting\"\r\n      :style=\"{\r\n        background: store.state.theme == 'light' ? '#fff' : '#333',\r\n      }\"\r\n    >\r\n      <n-dropdown :options=\"settingOptions\" :show-arrow=\"true\">\r\n        <div class=\"dropdown-box\">\r\n          <i-dropdown :color=\"store.state.theme == 'light' ? '#333' : '#fff'\" />\r\n        </div>\r\n      </n-dropdown>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script lang=\"ts\" setup>\r\nimport { useRouter, useRoute } from \"vue-router\";\r\nimport { useStore } from \"vuex\";\r\nimport { h, unref } from \"vue\";\r\nimport { IClose, IDropdown, IReload, ICloseAll } from \"@cop/Icons\";\r\nimport { NDropdown, useMessage } from \"naive-ui\";\r\nimport { reload } from \"@/hooks/reload\";\r\nimport { useLoadingBar } from \"naive-ui\";\r\nconst loadingBar = useLoadingBar();\r\n\r\nconst router = useRouter();\r\nconst route = useRoute();\r\nconst store = useStore();\r\nconst message = useMessage();\r\n\r\ninterface routerItem {\r\n  canItBeClosed: boolean;\r\n  path: string;\r\n  title: string;\r\n}\r\n\r\nconst settingOptions = [\r\n  {\r\n    label: () => h(\"div\", { onClick: refreshCurrent }, \"刷新当前\"),\r\n    key: \"刷新当前\",\r\n    icon: () => h(IReload),\r\n  },\r\n  {\r\n    label: () => h(\"div\", { onClick: closeCurrent }, \"关闭当前\"),\r\n    key: \"关闭当前\",\r\n    icon: () => h(IClose),\r\n  },\r\n  {\r\n    label: () => h(\"div\", { onClick: closeOther }, \"关闭其他\"),\r\n    key: \"关闭其他\",\r\n    icon: () => h(IClose),\r\n  },\r\n  {\r\n    label: () => h(\"div\", { onClick: closeAll }, \"关闭全部\"),\r\n    key: \"关闭全部\",\r\n    icon: () => h(ICloseAll),\r\n  },\r\n];\r\n\r\nconst closeRouter = (index: number) => {\r\n  if (index == 0) {\r\n    message.warning(\"主控台无法关闭\");\r\n    return;\r\n  }\r\n  let originRouterPath: string = store.state.routeStack[index].path;\r\n  store.commit(\"filterRouterStack\", index);\r\n  if (route.path == originRouterPath) {\r\n    //只有当前路由相同时才做判断跳转\r\n    if (index == store.state.routeStack.length) {\r\n      //最后一个路由\r\n      router.push({\r\n        path: store.state.routeStack[index - 1].path,\r\n      });\r\n    } else {\r\n      //不是最后一个路由\r\n      router.push({\r\n        path: store.state.routeStack[index].path,\r\n      });\r\n    }\r\n  }\r\n};\r\n\r\nconst link = (url: string) => {\r\n  if (route.path != url) {\r\n    router.push({ path: url });\r\n  }\r\n};\r\n\r\nconst refreshCurrent = () => {\r\n  //刷新当前页面\r\n  // router.push({\r\n  //   name: \"reload\",\r\n  //   params: { originUrl: unref(route).fullPath },\r\n  // });\r\n  reload(loadingBar);\r\n};\r\n\r\nconst closeCurrent = () => {\r\n  //关闭当前\r\n  const index = store.state.routeStack.findIndex(\r\n    (item: routerItem) => item.path == route.path\r\n  );\r\n  closeRouter(index);\r\n};\r\n\r\nconst closeOther = () => {\r\n  //关闭其他\r\n  const index = store.state.routeStack.findIndex(\r\n    (item: routerItem) => item.path == route.path\r\n  );\r\n  store.commit(\r\n    \"setRouterStack\",\r\n    store.state.routeStack.filter(\r\n      (item: routerItem, i: number) => index == i || i == 0\r\n    )\r\n  );\r\n};\r\n\r\nconst closeAll = () => {\r\n  //关闭所有\r\n  console.log(\"关闭所有\");\r\n\r\n  store.commit(\r\n    \"setRouterStack\",\r\n    store.state.routeStack.filter((item: routerItem, i: number) => i == 0)\r\n  );\r\n  router.push({ path: \"/admin/index\" });\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.currentRouterItem {\r\n  color: var(--themeColor) !important;\r\n}\r\n.dark-el-dropdown-item,\r\n.light-el-dropdown-item {\r\n  cursor: var(--cursor-B);\r\n}\r\n.routeContainer {\r\n  height: 100%;\r\n  width: 100%;\r\n  display: flex;\r\n  position: relative;\r\n  align-items: center;\r\n  .routeNav {\r\n    width: 0;\r\n    flex: 1;\r\n    height: 100%;\r\n    line-height: 5vh;\r\n    max-height: 5vh;\r\n    border-radius: 4px;\r\n    box-sizing: border-box;\r\n    position: relative;\r\n    overflow-x: auto;\r\n    overflow-y: hidden;\r\n    white-space: nowrap;\r\n    margin-right: 20px;\r\n    .routerItem {\r\n      display: inline-block;\r\n      height: 16px;\r\n      line-height: 16px;\r\n      padding: 6px 16px;\r\n      text-align: center;\r\n      font-size: 12.5px;\r\n      border-radius: 3px;\r\n      margin-right: 15px;\r\n      transition: all 0.3s var(--n-bezier);\r\n      .icon {\r\n        transform: translate(7px, 2px);\r\n\r\n        color: #999;\r\n        transition: color 0.3s;\r\n        &:hover {\r\n          color: rgb(131, 129, 129);\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .routerSetting {\r\n    cursor: var(--cursor-B);\r\n    border-radius: 2px;\r\n    width: 32px;\r\n    height: 32px;\r\n    display: flex;\r\n    justify-content: center;\r\n    align-items: center;\r\n    transition: all 0.3s var(--n-bezier);\r\n    .dropdown-box {\r\n      width: 100%;\r\n      height: 100%;\r\n      line-height: 32px;\r\n      text-align: center;\r\n    }\r\n    i {\r\n      transform: translateY(3px);\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import type { MenuOption } from \"naive-ui\";\r\nimport { RouterLink } from \"vue-router\";\r\nimport { h } from \"vue\";\r\nimport {\r\n  IHome,\r\n  IDocument,\r\n  IEdit,\r\n  IClassify,\r\n  ITag,\r\n  IConnection,\r\n  IComment,\r\n} from \"@cop/Icons\";\r\n\r\nconst menuOptions: MenuOption[] = [\r\n  {\r\n    label: () =>\r\n      h(\r\n        RouterLink,\r\n        {\r\n          to: {\r\n            name: \"admin\",\r\n          },\r\n        },\r\n        {\r\n          default: () => \"主控台\",\r\n        }\r\n      ),\r\n    key: \"/admin/index\",\r\n    icon: () => h(IHome),\r\n  },\r\n  {\r\n    label: () =>\r\n      h(\r\n        RouterLink,\r\n        {\r\n          to: {\r\n            name: \"blogArticles\",\r\n          },\r\n        },\r\n        {\r\n          default: () => \"博文总览\",\r\n        }\r\n      ),\r\n    key: \"/admin/blogArticles\",\r\n    icon: () => h(IDocument),\r\n  },\r\n  {\r\n    label: () =>\r\n      h(\r\n        RouterLink,\r\n        {\r\n          to: {\r\n            name: \"editBlogArticle\",\r\n          },\r\n        },\r\n        {\r\n          default: () => \"编辑博文\",\r\n        }\r\n      ),\r\n    key: \"/admin/editBlogArticle\",\r\n    icon: () => h(IEdit),\r\n  },\r\n  {\r\n    label: () =>\r\n      h(\r\n        RouterLink,\r\n        {\r\n          to: {\r\n            name: \"classifyBlogArticle\",\r\n          },\r\n        },\r\n        {\r\n          default: () => \"博文分类\",\r\n        }\r\n      ),\r\n    key: \"/admin/classifyBlogArticle\",\r\n    icon: () => h(IClassify),\r\n  },\r\n  {\r\n    label: () =>\r\n      h(\r\n        RouterLink,\r\n        {\r\n          to: {\r\n            name: \"blogArticleTag\",\r\n          },\r\n        },\r\n        {\r\n          default: () => \"博文标签\",\r\n        }\r\n      ),\r\n    key: \"/admin/blogArticleTag\",\r\n    icon: () => h(ITag),\r\n  },\r\n  {\r\n    label: \"友链管理\",\r\n    key: \"友链管理\",\r\n    icon: () => h(IConnection),\r\n    children: [\r\n      {\r\n        label: () =>\r\n          h(\r\n            RouterLink,\r\n            {\r\n              to: {\r\n                name: \"friends\",\r\n              },\r\n            },\r\n            {\r\n              default: () => \"友链列表\",\r\n            }\r\n          ),\r\n        key: \"/admin/friends\",\r\n      },\r\n      {\r\n        label: () =>\r\n          h(\r\n            RouterLink,\r\n            {\r\n              to: {\r\n                name: \"friendCheck\",\r\n              },\r\n            },\r\n            {\r\n              default: () => \"友链审核\",\r\n            }\r\n          ),\r\n        key: \"/admin/friendCheck\",\r\n      },\r\n    ],\r\n  },\r\n  {\r\n    label: \"评论管理\",\r\n    key: \"评论管理\",\r\n    icon: () => h(IComment),\r\n    children: [\r\n      {\r\n        label: () =>\r\n          h(\r\n            RouterLink,\r\n            {\r\n              to: {\r\n                name: \"comment\",\r\n              },\r\n            },\r\n            {\r\n              default: () => \"评论列表\",\r\n            }\r\n          ),\r\n        key: \"/admin/comment\",\r\n      },\r\n      {\r\n        label: () =>\r\n          h(\r\n            RouterLink,\r\n            {\r\n              to: {\r\n                name: \"commentUsers\",\r\n              },\r\n            },\r\n            {\r\n              default: () => \"评论用户\",\r\n            }\r\n          ),\r\n        key: \"/admin/commentUsers\",\r\n      },\r\n    ],\r\n  },\r\n];\r\nexport default menuOptions;\r\n","<script lang=\"ts\" setup>\r\nimport { NSpace, NLayout, NLayoutSider, NMenu } from \"naive-ui\";\r\nimport menuOptions from \"@/config/meun\";\r\nimport { useStore } from \"vuex\";\r\nimport { useRoute } from \"vue-router\";\r\nimport { watch } from \"vue\";\r\nconst route = useRoute();\r\nconst store = useStore();\r\nimport { ref } from \"vue\";\r\nimport { IMenuFold, IMenuUnFold } from \"@cop/Icons\";\r\nimport { isPC } from \"@/hooks/resize\";\r\nconst collapsed = ref<boolean>(!isPC.value);\r\n\r\nwatch(isPC, (newVal) => {\r\n  collapsed.value = !newVal;\r\n});\r\n</script>\r\n\r\n<template>\r\n  <n-space\r\n    vertical\r\n    class=\"sideMenu\"\r\n    :style=\"{\r\n      background: store.state.theme == 'light' ? '#fff' : '#333',\r\n    }\"\r\n  >\r\n    <div :class=\"collapsed ? 'icon-collapsed' : 'icon'\" class=\"collapsed-btn\">\r\n      <i-menu-un-fold\r\n        size=\"22\"\r\n        :color=\"$store.state.theme == 'light' ? '#333' : '#fff'\"\r\n        v-if=\"collapsed\"\r\n        @click=\"collapsed = !collapsed\"\r\n      />\r\n      <i-menu-fold\r\n        size=\"22\"\r\n        :color=\"$store.state.theme == 'light' ? '#333' : '#fff'\"\r\n        v-else\r\n        @click=\"collapsed = !collapsed\"\r\n      />\r\n    </div>\r\n\r\n    <n-layout has-sider>\r\n      <n-layout-sider\r\n        bordered\r\n        collapse-mode=\"width\"\r\n        :collapsed-width=\"70\"\r\n        :width=\"200\"\r\n        :collapsed=\"collapsed\"\r\n        @collapse=\"collapsed = true\"\r\n        @expand=\"collapsed = false\"\r\n        trigger-style=\"right:5px;\"\r\n        :style=\"{\r\n          background: store.state.theme == 'light' ? '#fff' : '#333',\r\n        }\"\r\n      >\r\n        <n-menu\r\n          :value=\"route.fullPath\"\r\n          :collapsed=\"collapsed\"\r\n          :collapsed-width=\"70\"\r\n          :collapsed-icon-size=\"22\"\r\n          :options=\"menuOptions\"\r\n          :accordion=\"true\"\r\n        />\r\n      </n-layout-sider>\r\n    </n-layout>\r\n  </n-space>\r\n</template>\r\n<style lang=\"scss\" scoped>\r\n.sideMenu {\r\n  height: 92vh;\r\n  box-shadow: rgb(0 0 0 / 30%) 0px 19px 38px, rgb(0 0 0 / 22%) 0px 15px 12px;\r\n  transition: background-color 0.3s var(--n-bezier);\r\n  position: relative;\r\n}\r\n.icon {\r\n  text-align: right;\r\n  box-sizing: border-box;\r\n  padding-right: 10px;\r\n  padding-top: 10px;\r\n}\r\n.icon-collapsed {\r\n  text-align: center;\r\n  padding-right: 0;\r\n  padding-top: 10px;\r\n}\r\n</style>\r\n","<template>\r\n  <router-view v-slot=\"{ Component }\" v-if=\"routeIsAlive\">\r\n    <transition name=\"zoom-fade\">\r\n      <!-- mode=\"out-in\" appear -->\r\n      <component :is=\"Component\" :key=\"route.fullPath\" />\r\n    </transition>\r\n  </router-view>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { useRoute } from \"vue-router\";\r\nimport { routeIsAlive } from \"@/hooks/reload\";\r\nconst route = useRoute();\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.zoom-fade-enter-active {\r\n  animation: fadeZoomIn 1.4s;\r\n}\r\n.zoom-fade-leave-active {\r\n  animation: fadeZoomOut 0.6s;\r\n}\r\n\r\n@keyframes fadeZoomIn {\r\n  0% {\r\n    opacity: 0;\r\n    transform: scale(0.01, 0.01);\r\n  }\r\n  50% {\r\n    transform: scale(1);\r\n  }\r\n  100% {\r\n    opacity: 1;\r\n  }\r\n}\r\n@keyframes fadeZoomOut {\r\n  0% {\r\n    opacity: 1;\r\n  }\r\n  50% {\r\n    transform: scale(1.05);\r\n  }\r\n  100% {\r\n    opacity: 0;\r\n  }\r\n}\r\n\r\n// .zoom-fade-enter-active,\r\n// .zoom-fade-leave-active {\r\n//   transition: transform 0.3s, opacity 0.3s ease-out;\r\n// }\r\n\r\n// .zoom-fade-enter-from {\r\n//   opacity: 0;\r\n//   transform: scale(0.92);\r\n// }\r\n\r\n// .zoom-fade-leave-to {\r\n//   opacity: 0;\r\n//   transform: scale(1.06);\r\n// }\r\n</style>\r\n","<template>\r\n  <transition name=\"fade\">\r\n    <div\r\n      class=\"loading\"\r\n      :class=\"{\r\n        [`${store.state.theme}-loading`]: true,\r\n        'loading-auto': auto,\r\n      }\"\r\n      v-if=\"isShow\"\r\n    >\r\n      <div class=\"loading-box\">\r\n        <svg\r\n          class=\"loading-icon\"\r\n          :class=\"store.state.theme + '-loading-icon'\"\r\n          viewBox=\"0 0 200 200\"\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n        >\r\n          <g>\r\n            <animateTransform\r\n              attributeName=\"transform\"\r\n              type=\"rotate\"\r\n              values=\"0 100 100;270 100 100\"\r\n              begin=\"0s\"\r\n              dur=\"1.6s\"\r\n              fill=\"freeze\"\r\n              repeatCount=\"indefinite\"\r\n            ></animateTransform>\r\n            <circle\r\n              fill=\"none\"\r\n              stroke=\"currentColor\"\r\n              stroke-width=\"16\"\r\n              stroke-linecap=\"round\"\r\n              cx=\"100\"\r\n              cy=\"100\"\r\n              r=\"92\"\r\n              stroke-dasharray=\"567\"\r\n              stroke-dashoffset=\"1848\"\r\n            >\r\n              <animateTransform\r\n                attributeName=\"transform\"\r\n                type=\"rotate\"\r\n                values=\"0 100 100;135 100 100;450 100 100\"\r\n                begin=\"0s\"\r\n                dur=\"1.6s\"\r\n                fill=\"freeze\"\r\n                repeatCount=\"indefinite\"\r\n              ></animateTransform>\r\n              <animate\r\n                attributeName=\"stroke-dashoffset\"\r\n                values=\"567;142;567\"\r\n                begin=\"0s\"\r\n                dur=\"1.6s\"\r\n                fill=\"freeze\"\r\n                repeatCount=\"indefinite\"\r\n              ></animate>\r\n            </circle>\r\n          </g>\r\n        </svg>\r\n        <p class=\"loading-text\" :class=\"store.state.theme + '-loading-text'\">\r\n          {{ text }}\r\n        </p>\r\n      </div>\r\n    </div>\r\n  </transition>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { defineProps, toRefs } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nconst store = useStore();\r\ninterface props {\r\n  isShow?: boolean;\r\n  text?: string;\r\n  auto?: boolean;\r\n}\r\nconst props: props = defineProps({\r\n  isShow: {\r\n    default: false,\r\n    type: Boolean,\r\n  },\r\n  text: {\r\n    type: String,\r\n    default: \"快马加鞭中...\",\r\n  },\r\n  auto: Boolean,\r\n});\r\nconst { isShow, text, auto } = toRefs(props);\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n@import url(\"./theme/dark.scss\");\r\n@import url(\"./theme/light.scss\");\r\n.loading {\r\n  width: 100%;\r\n  height: 100%;\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  z-index: 98;\r\n  border-radius: 4px;\r\n  transition: all 0.3s var(--n-bezier);\r\n  .loading-box {\r\n    width: 100%;\r\n    height: 100px;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    .loading-icon {\r\n      width: 30px;\r\n      height: 30px;\r\n      position: absolute;\r\n      top: 42%;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n    }\r\n    .loading-text {\r\n      font-size: 14px;\r\n      position: absolute;\r\n      top: 42%;\r\n      left: 50%;\r\n      transform: translate(-50%, -50%);\r\n      margin-top: 45px;\r\n      letter-spacing: 3px;\r\n    }\r\n  }\r\n}\r\n.loading-auto {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n}\r\n\r\n.fade-enter-active {\r\n  -webkit-animation: fadeIn 0.5s linear;\r\n  animation: fadeIn 0.5s linear;\r\n}\r\n.fade-leave-active {\r\n  -webkit-animation: fadeOut 0.5s linear;\r\n  animation: fadeOut 0.5s linear;\r\n}\r\n</style>\r\n","<template>\r\n  <div\r\n    class=\"admin\"\r\n    :style=\"{\r\n      background: store.state.theme == 'light' ? '#f0f2f5' : '#101014',\r\n    }\"\r\n  >\r\n    <div class=\"header\"><v-header /></div>\r\n    <div class=\"center\">\r\n      <sideMenu />\r\n      <div class=\"rightContainer\">\r\n        <div class=\"routerNav\" v-if=\"isPC\"><route-nav /></div>\r\n        <div class=\"routerContent\">\r\n          <routerContent />\r\n          <partLoading :isShow=\"!routeIsAlive\" auto text=\"Loading\" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"aplayer\" ref=\"aplayer\" v-if=\"isPC\"></div>\r\n  </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { onMounted, h, ref, onUnmounted } from \"vue\";\r\nimport { useStore } from \"vuex\";\r\nimport { getStorage } from \"@/util/cache\";\r\nimport VHeader from \"@cop/admin/v-header/index.vue\";\r\nimport RouteNav from \"@cop/admin/RouteNav/index.vue\";\r\nimport sideMenu from \"@cop/admin/sideMenu/index.vue\";\r\nimport routerContent from \"@cop/admin/routeContent/index.vue\";\r\nimport partLoading from \"@cop/loading/partLoading/index.vue\";\r\nimport APlayer from \"aplayer\";\r\nimport \"aplayer/dist/APlayer.min.css\";\r\nimport { isPC } from \"@/hooks/resize\";\r\nimport { routeIsAlive } from \"@/hooks/reload\";\r\nimport { useNotification, NAvatar, NButton, useMessage } from \"naive-ui\";\r\n\r\nlet aplayerInstance = null;\r\n\r\nconst aplayer = ref(null);\r\n\r\nconst createAplayer = (id) => {\r\n  let url = `https://api.i-meto.com/meting/api?server=netease&type=playlist&id=${id}&r=${Math.random()}`;\r\n  fetch(url)\r\n    .then((res) => res.json())\r\n    .then((data) => {\r\n      const theme = getComputedStyle(document.documentElement).getPropertyValue(\r\n        \"--themeColor\"\r\n      );\r\n      const songs = [];\r\n      data.forEach((song) => {\r\n        songs.push({\r\n          name: song.title,\r\n          artist: song.author,\r\n          url: song.url,\r\n          cover: song.pic,\r\n          lrc: song.lrc,\r\n        });\r\n      });\r\n\r\n      aplayerInstance = new APlayer({\r\n        container: aplayer.value,\r\n        theme: theme,\r\n        loop: \"loop\",\r\n        lrcType: 3,\r\n        fixed: true,\r\n        listFolded: true,\r\n        audio: songs,\r\n      });\r\n    });\r\n};\r\n\r\nconst notification = useNotification();\r\nconst message = useMessage();\r\n\r\nconst store = useStore();\r\nconst initAdminInfo = () => {\r\n  //初始化管理员信息\r\n  const adminInfo = JSON.parse(getStorage(\"adminInfo\"));\r\n  store.commit(\"setAdminInfo\", adminInfo);\r\n};\r\nconst initRouteStack = () => {\r\n  store.commit(\r\n    \"setRouterStack\",\r\n    JSON.parse(getStorage(\"routeStack\"))\r\n      ? JSON.parse(getStorage(\"routeStack\"))\r\n      : [\r\n          {\r\n            canItBeClosed: false,\r\n            title: \"主控台\",\r\n            path: \"/admin/index\",\r\n          },\r\n        ]\r\n  );\r\n};\r\nconst initTheme = () => {\r\n  const hours = new Date().getHours();\r\n  if (hours >= 18 || hours <= 4) {\r\n    store.commit(\"setTheme\", \"dark\");\r\n  } else {\r\n    store.commit(\"setTheme\", \"light\");\r\n  }\r\n};\r\n\r\nconst TimeTip = () => {\r\n  let markAsRead = false;\r\n  const hours = new Date().getHours();\r\n  let content = null;\r\n  if (hours >= 1 && hours <= 4) {\r\n    //凌晨\r\n    content = \"已经凌晨了,再忙也要注意休息啊！\";\r\n  } else if (hours >= 5 && hours <= 10) {\r\n    //早上\r\n    content = \"一日之计在于晨，新的一天开始了！\";\r\n  } else if (hours >= 11 && hours <= 12) {\r\n    //中午\r\n    content = \"肚子饿了吧,该去干饭了，然后午休一下吧！\";\r\n  } else if (hours >= 13 && hours <= 18) {\r\n    //下午\r\n    content = \"悠闲的下午时光开始了，给自己点杯下午茶吧！\";\r\n  } else if (hours >= 19 || hours == 0) {\r\n    //晚上\r\n    content = \"晚餐过后，更适合出门散步吹吹凉风呢！\";\r\n  }\r\n  const n = notification.create({\r\n    title: \"小蝣温馨提示:\",\r\n    content,\r\n    meta: new Date().toLocaleString(),\r\n    avatar: () =>\r\n      h(NAvatar, {\r\n        size: \"small\",\r\n        round: false,\r\n        src: \"https://fuyouplus.cn/imgs/tx.jpg\",\r\n      }),\r\n    action: () =>\r\n      h(\r\n        NButton,\r\n        {\r\n          text: true,\r\n          type: \"primary\",\r\n          onClick: () => {\r\n            markAsRead = true;\r\n            n.destroy();\r\n          },\r\n        },\r\n        {\r\n          default: () => \"已读\",\r\n        }\r\n      ),\r\n    onClose: () => {\r\n      if (!markAsRead) {\r\n        message.warning(\"请设为已读\");\r\n        return false;\r\n      }\r\n    },\r\n  });\r\n};\r\n\r\nonMounted(() => {\r\n  initRouteStack();\r\n  initAdminInfo();\r\n  initTheme();\r\n  TimeTip();\r\n  isPC.value && createAplayer(\"6753853945\");\r\n});\r\nonUnmounted(() => {\r\n  aplayerInstance.destroy();\r\n});\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n.aplayer:deep(.aplayer-body) {\r\n  font-family: \"fira-code\" !important;\r\n  color: var(--themeColor) !important;\r\n}\r\n\r\n.aplayer:deep(.aplayer-body) .aplayer-pic {\r\n  background-color: var(--themeColor) !important;\r\n}\r\n.aplayer:deep(.aplayer-list) ol::-webkit-scrollbar-thumb {\r\n  border-radius: 3px;\r\n  background-color: var(--themeColor) !important;\r\n  background-image: -webkit-linear-gradient(\r\n    45deg,\r\n    hsla(0, 0%, 100%, 0.6) 25%,\r\n    transparent 0,\r\n    transparent 50%,\r\n    hsla(0, 0%, 100%, 0.6) 0,\r\n    hsla(0, 0%, 100%, 0.6) 75%,\r\n    transparent 0,\r\n    transparent\r\n  );\r\n}\r\n\r\n.aplayer:deep(.aplayer-list) .aplayer-list-cur {\r\n  background: var(--themeColor) !important;\r\n}\r\n\r\n.aplayer:deep(.aplayer-bar) .aplayer-played,\r\n.aplayer:deep(.aplayer-bar) .aplayer-thumb {\r\n  background: var(--themeColor) !important;\r\n}\r\n.aplayer:deep(.aplayer-lrc-current) {\r\n  font-size: 16px !important;\r\n}\r\n.aplayer:deep(.aplayer-lrc) {\r\n  text-shadow: none;\r\n}\r\n.aplayer:deep(.aplayer-lrc-contents) p {\r\n  color: var(--themeColor);\r\n  font-size: 14px;\r\n  font-family: \"fira-code\";\r\n}\r\n\r\n.admin {\r\n  width: 100vw;\r\n  height: 100vh;\r\n  transition: background-color 0.3s var(--n-bezier);\r\n  overflow: hidden;\r\n}\r\n.header {\r\n  width: 100vw;\r\n  height: 8vh;\r\n}\r\n.center {\r\n  width: 100vw;\r\n  height: 92vh;\r\n  display: flex;\r\n  .slideMenu {\r\n    width: 10vw;\r\n    height: 92vh;\r\n    transition: width 0.3s ease-in-out;\r\n  }\r\n  .rightContainer {\r\n    flex: 1;\r\n    height: 92vh;\r\n    .routerNav {\r\n      width: 98%;\r\n      height: 5vh;\r\n      margin: 0 auto;\r\n      margin-top: 1vh;\r\n      margin-bottom: 1vh;\r\n    }\r\n    .routerContent {\r\n      width: 98%;\r\n      height: 85vh;\r\n      margin: 0 auto;\r\n      position: relative;\r\n    }\r\n  }\r\n}\r\n@media (max-width: 768px) {\r\n  .routerContent {\r\n    height: 92vh !important;\r\n  }\r\n}\r\n</style>\r\n"],"names":[],"mappings":"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"}