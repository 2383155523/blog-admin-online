import{o as X,a as U}from"./evtd.5b1ed12a.js";import{A as de,d as ee,y as Y,x as Se}from"./seemly.bd85dbed.js";import{c as ze,F as fe,C as Ee,f as C,p as Te,q as Ae,i as J,r as F,o as Q,k as he,t as N,b as V,h as T,y as Fe,j as _,w as H,n as ce,aL as pe,ax as Ie,m as Be}from"./@vue.3182ba0d.js";import{u as Z}from"./@css-render.4d849085.js";import{g as Oe,u as q,o as ke,i as Ce}from"./vooks.54ac2ec9.js";import{z as Le}from"./vdirs.03f40802.js";import{i as Ve}from"./resize-observer-polyfill.8deb1e21.js";import{C as We}from"./css-render.d5050412.js";function K(n,e,t="default"){const r=e[t];if(r===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);return r()}function G(n,e=!0,t=[]){return n.forEach(r=>{if(r!==null){if(typeof r!="object"){(typeof r=="string"||typeof r=="number")&&t.push(ze(String(r)));return}if(Array.isArray(r)){G(r,e,t);return}if(r.type===fe){if(r.children===null)return;Array.isArray(r.children)&&G(r.children,e,t)}else r.type!==Ee&&t.push(r)}}),t}function te(n,e,t="default"){const r=e[t];if(r===void 0)throw new Error(`[vueuc/${n}]: slot[${t}] is empty.`);const o=G(r());if(o.length===1)return o[0];throw new Error(`[vueuc/${n}]: slot[${t}] should have exactly one child.`)}let O=null;function me(){if(O===null&&(O=document.getElementById("v-binder-view-measurer"),O===null)){O=document.createElement("div"),O.id="v-binder-view-measurer";const{style:n}=O;n.position="fixed",n.left="0",n.right="0",n.top="0",n.bottom="0",n.pointerEvents="none",n.visibility="hidden",document.body.appendChild(O)}return O.getBoundingClientRect()}function He(n,e){const t=me();return{top:e,left:n,height:0,width:0,right:t.width-n,bottom:t.height-e}}function j(n){const e=n.getBoundingClientRect(),t=me();return{left:e.left-t.left,top:e.top-t.top,bottom:t.height+t.top-e.bottom,right:t.width+t.left-e.right,width:e.width,height:e.height}}function Xe(n){return n.nodeType===9?null:n.parentNode}function ve(n){if(n===null)return null;const e=Xe(n);if(e===null)return null;if(e.nodeType===9)return document;if(e.nodeType===1){const{overflow:t,overflowX:r,overflowY:o}=getComputedStyle(e);if(/(auto|scroll|overlay)/.test(t+o+r))return e}return ve(e)}const Ye=C({name:"Binder",props:{syncTargetWithParent:Boolean,syncTarget:{type:Boolean,default:!0}},setup(n){var e;Te("VBinder",(e=Ae())===null||e===void 0?void 0:e.proxy);const t=J("VBinder",null),r=F(null),o=i=>{r.value=i,t&&n.syncTargetWithParent&&t.setTargetRef(i)};let h=[];const c=()=>{let i=r.value;for(;i=ve(i),i!==null;)h.push(i);for(const v of h)U("scroll",v,$,!0)},g=()=>{for(const i of h)X("scroll",i,$,!0);h=[]},d=new Set,p=i=>{d.size===0&&c(),d.has(i)||d.add(i)},M=i=>{d.has(i)&&d.delete(i),d.size===0&&g()},$=()=>{de(s)},s=()=>{d.forEach(i=>i())},u=new Set,b=i=>{u.size===0&&U("resize",window,l),u.has(i)||u.add(i)},m=i=>{u.has(i)&&u.delete(i),u.size===0&&X("resize",window,l)},l=()=>{u.forEach(i=>i())};return Q(()=>{X("resize",window,l),g()}),{targetRef:r,setTargetRef:o,addScrollListener:p,removeScrollListener:M,addResizeListener:b,removeResizeListener:m}},render(){return K("binder",this.$slots)}});var ut=Ye,at=C({name:"Target",setup(){const{setTargetRef:n,syncTarget:e}=J("VBinder");return{syncTarget:e,setTargetDirective:{mounted:n,updated:n}}},render(){const{syncTarget:n,setTargetDirective:e}=this;return n?he(te("follower",this.$slots),[[e]]):te("follower",this.$slots)}});function ne(n,e){console.error(`[vueuc/${n}]: ${e}`)}const{c:k}=We(),R="vueuc-style";function re(n){return n&-n}class De{constructor(e,t){this.l=e,this.min=t;const r=new Array(e+1);for(let o=0;o<e+1;++o)r[o]=0;this.ft=r}add(e,t){if(t===0)return;const{l:r,ft:o}=this;for(e+=1;e<=r;)o[e]+=t,e+=re(e)}get(e){return this.sum(e+1)-this.sum(e)}sum(e){if(e===0)return 0;const{ft:t,min:r,l:o}=this;if(e===void 0&&(e=o),e>o)throw new Error("[FinweckTree.sum]: `i` is larger than length.");let h=e*r;for(;e>0;)h+=t[e],e-=re(e);return h}getBound(e){let t=0,r=this.l;for(;r>t;){const o=Math.floor((t+r)/2),h=this.sum(o);if(h>e){r=o;continue}else if(h<e){if(t===o)return this.sum(t+1)<=e?t+1:o;t=o}else return o}return t}}function ie(n){return typeof n=="string"?document.querySelector(n):n()}var Ne=C({name:"LazyTeleport",props:{to:{type:[String,Object],default:void 0},disabled:Boolean,show:{type:Boolean,required:!0}},setup(n){return{showTeleport:Oe(N(n,"show")),mergedTo:V(()=>{const{to:e}=n;return e!=null?e:"body"})}},render(){return this.showTeleport?this.disabled?K("lazy-teleport",this.$slots):T(Fe,{disabled:this.disabled,to:this.mergedTo},K("lazy-teleport",this.$slots)):null}});const D={top:"bottom",bottom:"top",left:"right",right:"left"},oe={start:"end",center:"center",end:"start"},P={top:"height",bottom:"height",left:"width",right:"width"},_e={"bottom-start":"top left",bottom:"top center","bottom-end":"top right","top-start":"bottom left",top:"bottom center","top-end":"bottom right","right-start":"top left",right:"center left","right-end":"bottom left","left-start":"top right",left:"center right","left-end":"bottom right"},je={"bottom-start":"bottom left",bottom:"bottom center","bottom-end":"bottom right","top-start":"top left",top:"top center","top-end":"top right","right-start":"top right",right:"center right","right-end":"bottom right","left-start":"top left",left:"center left","left-end":"bottom left"},Pe={"bottom-start":"right","bottom-end":"left","top-start":"right","top-end":"left","right-start":"bottom","right-end":"top","left-start":"bottom","left-end":"top"},le={top:!0,bottom:!1,left:!0,right:!1},se={top:"end",bottom:"start",left:"end",right:"start"};function Ue(n,e,t,r,o,h){if(!o||h)return{placement:n,top:0,left:0};const[c,g]=n.split("-");let d=g!=null?g:"center",p={top:0,left:0};const M=(u,b,m)=>{let l=0,i=0;const v=t[u]-e[b]-e[u];return v>0&&r&&(m?i=le[b]?v:-v:l=le[b]?v:-v),{left:l,top:i}},$=c==="left"||c==="right";if(d!=="center"){const u=Pe[n],b=D[u],m=P[u];if(t[m]>e[m]){if(e[u]+e[m]<t[m]){const l=(t[m]-e[m])/2;e[u]<l||e[b]<l?e[u]<e[b]?(d=oe[g],p=M(m,b,$)):p=M(m,u,$):d="center"}}else t[m]<e[m]&&e[b]<0&&e[u]>e[b]&&(d=oe[g])}else{const u=c==="bottom"||c==="top"?"left":"top",b=D[u],m=P[u],l=(t[m]-e[m])/2;(e[u]<l||e[b]<l)&&(e[u]>e[b]?(d=se[u],p=M(m,u,$)):(d=se[b],p=M(m,b,$)))}let s=c;return e[c]<t[P[c]]&&e[c]<e[D[c]]&&(s=D[c]),{placement:d!=="center"?`${s}-${d}`:s,left:p.left,top:p.top}}function qe(n,e){return e?je[n]:_e[n]}function Ke(n,e,t,r,o,h){if(h)switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"top-end":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%)"};case"right-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left)}px`,transform:""};case"left-end":return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left+t.width)}px`,transform:"translateX(-100%) translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2)}px`,left:`${Math.round(t.left-e.left)}px`,transform:"translateY(-50%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height)}px`,left:`${Math.round(t.left-e.left+t.width/2)}px`,transform:"translateX(-50%) translateY(-100%)"}}switch(n){case"bottom-start":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:""};case"bottom-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateX(-100%)"};case"top-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateY(-100%)"};case"top-end":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateX(-100%) translateY(-100%)"};case"right-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:""};case"right-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateY(-100%)"};case"left-start":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateX(-100%)"};case"left-end":return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateX(-100%) translateY(-100%)"};case"top":return{top:`${Math.round(t.top-e.top+r)}px`,left:`${Math.round(t.left-e.left+t.width/2+o)}px`,transform:"translateY(-100%) translateX(-50%)"};case"right":return{top:`${Math.round(t.top-e.top+t.height/2+r)}px`,left:`${Math.round(t.left-e.left+t.width+o)}px`,transform:"translateY(-50%)"};case"left":return{top:`${Math.round(t.top-e.top+t.height/2+r)}px`,left:`${Math.round(t.left-e.left+o)}px`,transform:"translateY(-50%) translateX(-100%)"};case"bottom":default:return{top:`${Math.round(t.top-e.top+t.height+r)}px`,left:`${Math.round(t.left-e.left+t.width/2+o)}px`,transform:"translateX(-50%)"}}}const Ge=k([k(".v-binder-follower-container",{position:"absolute",left:"0",right:"0",top:"0",height:"0",pointerEvents:"none",zIndex:"auto"}),k(".v-binder-follower-content",{position:"absolute",zIndex:"auto"},[k("> *",{pointerEvents:"all"})])]);var dt=C({name:"Follower",inheritAttrs:!1,props:{show:Boolean,enabled:{type:Boolean,default:void 0},placement:{type:String,default:"bottom"},syncTrigger:{type:Array,default:["resize","scroll"]},to:[String,Object],flip:{type:Boolean,default:!0},internalShift:Boolean,x:Number,y:Number,width:String,minWidth:String,containerClass:String,teleportDisabled:Boolean,zindexable:{type:Boolean,default:!0},zIndex:Number,overlap:Boolean},setup(n){const e=J("VBinder"),t=q(()=>n.enabled!==void 0?n.enabled:n.show),r=F(null),o=F(null),h=()=>{const{syncTrigger:s}=n;s.includes("scroll")&&e.addScrollListener(d),s.includes("resize")&&e.addResizeListener(d)},c=()=>{e.removeScrollListener(d),e.removeResizeListener(d)};_(()=>{t.value&&(d(),h())});const g=Z();Ge.mount({id:"vueuc/binder",head:!0,anchorMetaName:R,ssr:g}),Q(()=>{c()}),ke(()=>{t.value&&d()});const d=()=>{if(!t.value)return;const s=r.value;if(s===null)return;const u=e.targetRef,{x:b,y:m,overlap:l}=n,i=b!==void 0&&m!==void 0?He(b,m):j(u);s.style.setProperty("--v-target-width",`${Math.round(i.width)}px`),s.style.setProperty("--v-target-height",`${Math.round(i.height)}px`);const{width:v,minWidth:z,placement:I,internalShift:f,flip:a}=n;s.setAttribute("v-placement",I),l?s.setAttribute("v-overlap",""):s.removeAttribute("v-overlap");const{style:y}=s;v==="target"?y.width=`${i.width}px`:v!==void 0?y.width=v:y.width="",z==="target"?y.minWidth=`${i.width}px`:z!==void 0?y.minWidth=z:y.minWidth="";const x=j(s),S=j(o.value),{left:E,top:w,placement:A}=Ue(I,i,x,f,a,l),B=qe(A,l),{left:xe,top:$e,transform:Me}=Ke(A,S,i,w,E,l);s.setAttribute("v-placement",A),s.style.setProperty("--v-offset-left",`${Math.round(E)}px`),s.style.setProperty("--v-offset-top",`${Math.round(w)}px`),s.style.transform=`translateX(${xe}) translateY(${$e}) ${Me}`,s.style.transformOrigin=B};H(t,s=>{s?(h(),p()):c()});const p=()=>{ce().then(d).catch(s=>console.error(s))};["placement","x","y","internalShift","flip","width","overlap","minWidth"].forEach(s=>{H(N(n,s),d)}),["teleportDisabled"].forEach(s=>{H(N(n,s),p)}),H(N(n,"syncTrigger"),s=>{s.includes("resize")?e.addResizeListener(d):e.removeResizeListener(d),s.includes("scroll")?e.addScrollListener(d):e.removeScrollListener(d)});const M=Ce(),$=q(()=>{const{to:s}=n;if(s!==void 0)return s;!M.value});return{VBinder:e,mergedEnabled:t,offsetContainerRef:o,followerRef:r,mergedTo:$,syncPosition:d}},render(){return T(Ne,{show:this.show,to:this.mergedTo,disabled:this.teleportDisabled},{default:()=>{var n,e;const t=T("div",{class:["v-binder-follower-container",this.containerClass],ref:"offsetContainerRef"},[T("div",{class:"v-binder-follower-content",ref:"followerRef"},(e=(n=this.$slots).default)===null||e===void 0?void 0:e.call(n))]);return this.zindexable?he(t,[[Le,{enabled:this.mergedEnabled,zIndex:this.zIndex}]]):t}})}});class Je{constructor(){this.handleResize=this.handleResize.bind(this),this.observer=new Ve(this.handleResize),this.elHandlersMap=new Map}handleResize(e){for(const t of e){const r=this.elHandlersMap.get(t.target);r!==void 0&&r(t)}}registerHandler(e,t){this.elHandlersMap.set(e,t),this.observer.observe(e)}unregisterHandler(e){!this.elHandlersMap.has(e)||(this.elHandlersMap.delete(e),this.observer.unobserve(e))}}var ue=new Je,ae=C({name:"ResizeObserver",props:{onResize:Function},setup(n){return{registered:!1,handleResize(e){const{onResize:t}=n;t!==void 0&&t(e)}}},mounted(){const n=this.$el;if(n===void 0){ne("resize-observer","$el does not exist.");return}if(n.nextElementSibling!==n.nextSibling&&n.nodeType===3&&n.nodeValue!==""){ne("resize-observer","$el can not be observed (it may be a text node).");return}n.nextElementSibling!==null&&(ue.registerHandler(n.nextElementSibling,this.handleResize),this.registered=!0)},beforeUnmount(){this.registered&&ue.unregisterHandler(this.$el.nextElementSibling)},render(){return pe(this.$slots,"default")}});const Qe=k(".v-vl",{maxHeight:"inherit",height:"100%",overflow:"auto",minWidth:"1px"},[k("&:not(.v-vl--show-scrollbar)",{scrollbarWidth:"none"},[k("&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb",{width:0,height:0,display:"none"})])]);var ft=C({name:"VirtualList",inheritAttrs:!1,props:{showScrollbar:{type:Boolean,default:!0},items:{type:Array,default:()=>[]},itemSize:{type:Number,required:!0},itemResizable:Boolean,itemsStyle:[String,Object],visibleItemsTag:{type:[String,Object],default:"div"},visibleItemsProps:Object,ignoreItemResize:Boolean,onScroll:Function,onWheel:Function,onResize:Function,defaultScrollKey:[Number,String],defaultScrollIndex:Number,keyField:{type:String,default:"key"},paddingTop:{type:[Number,String],default:0},paddingBottom:{type:[Number,String],default:0}},setup(n){const e=Z();Qe.mount({id:"vueuc/virtual-list",head:!0,anchorMetaName:R,ssr:e}),_(()=>{const{defaultScrollIndex:f,defaultScrollKey:a}=n;f!=null?$({index:f}):a!=null&&$({key:a})}),Ie(()=>{$({top:d.value})});const t=V(()=>{const f=new Map,{keyField:a}=n;return n.items.forEach((y,x)=>{f.set(y[a],x)}),f}),r=F(null),o=F(void 0),h=new Map,c=V(()=>{const{items:f,itemSize:a,keyField:y}=n,x=new De(f.length,a);return f.forEach((S,E)=>{const w=S[y],A=h.get(w);A!==void 0&&x.add(E,A)}),x}),g=F(0),d=F(0),p=q(()=>Math.max(c.value.getBound(d.value-ee(n.paddingTop))-1,0)),M=V(()=>{const{value:f}=o;if(f===void 0)return[];const{items:a,itemSize:y}=n,x=p.value,S=Math.min(x+Math.ceil(f/y+1),a.length-1),E=[];for(let w=x;w<=S;++w)E.push(a[w]);return E}),$=f=>{const{left:a,top:y,index:x,key:S,position:E,behavior:w,debounce:A=!0}=f;if(a!==void 0||y!==void 0)u(a,y,w);else if(x!==void 0)s(x,w,A);else if(S!==void 0){const B=t.value.get(S);B!==void 0&&s(B,w,A)}else E==="bottom"?u(0,Number.MAX_SAFE_INTEGER,w):E==="top"&&u(0,0,w)};function s(f,a,y){const{value:x}=c,S=x.sum(f)+ee(n.paddingTop);if(!y)r.value.scrollTo({left:0,top:S,behavior:a});else{const{scrollTop:E,offsetHeight:w}=r.value;if(S>E){const A=x.get(f);S+A<=E+w||r.value.scrollTo({left:0,top:S+A-w,behavior:a})}else r.value.scrollTo({left:0,top:S,behavior:a})}i=f}function u(f,a,y){r.value.scrollTo({left:f,top:a,behavior:y})}function b(f,a){var y;if(n.ignoreItemResize||I(a.target))return;const{value:x}=c,S=t.value.get(f),E=x.get(S),w=a.contentRect.height;if(w===E)return;w-n.itemSize===0?h.delete(f):h.set(f,w-n.itemSize);const B=w-E;B!==0&&(v!==void 0&&S<=v&&((y=r.value)===null||y===void 0||y.scrollBy(0,B)),x.add(S,B),g.value++)}function m(f){de(z);const{onScroll:a}=n;a!==void 0&&a(f)}function l(f){if(I(f.target)||f.contentRect.height===o.value)return;o.value=f.contentRect.height;const{onResize:a}=n;a!==void 0&&a(f)}let i,v;function z(){const{value:f}=r;f!=null&&(v=i!=null?i:p.value,i=void 0,d.value=r.value.scrollTop)}function I(f){let a=f;for(;a!==null;){if(a.style.display==="none")return!0;a=a.parentElement}return!1}return{listHeight:o,listStyle:{overflow:"auto"},keyToIndex:t,itemsStyle:V(()=>{const{itemResizable:f}=n,a=Y(c.value.sum());return g.value,[n.itemsStyle,{boxSizing:"content-box",height:f?"":a,minHeight:f?a:"",paddingTop:Y(n.paddingTop),paddingBottom:Y(n.paddingBottom)}]}),visibleItemsStyle:V(()=>(g.value,{transform:`translateY(${Y(c.value.sum(p.value))})`})),viewportItems:M,listElRef:r,itemsElRef:F(null),scrollTo:$,handleListResize:l,handleListScroll:m,handleItemResize:b}},render(){const{itemResizable:n,keyField:e,keyToIndex:t,visibleItemsTag:r}=this;return T(ae,{onResize:this.handleListResize},{default:()=>{var o,h;return T("div",Be(this.$attrs,{class:["v-vl",this.showScrollbar&&"v-vl--show-scrollbar"],onScroll:this.handleListScroll,onWheel:this.onWheel,ref:"listElRef"}),[this.items.length!==0?T("div",{ref:"itemsElRef",class:"v-vl-items",style:this.itemsStyle},[T(r,Object.assign({class:"v-vl-visible-items",style:this.visibleItemsStyle},this.visibleItemsProps),{default:()=>this.viewportItems.map(c=>{const g=c[e],d=t.get(g),p=this.$slots.default({item:c,index:d})[0];return n?T(ae,{key:g,onResize:M=>this.handleItemResize(g,M)},{default:()=>p}):(p.key=g,p)})})]):(h=(o=this.$slots).empty)===null||h===void 0?void 0:h.call(o)])}})}});const L="v-hidden",Ze=k("[v-hidden]",{display:"none!important"});var ht=C({name:"Overflow",props:{getCounter:Function,getTail:Function,updateCounter:Function,onUpdateOverflow:Function},setup(n,{slots:e}){const t=F(null),r=F(null);function o(){const{value:c}=t,{getCounter:g,getTail:d}=n;let p;if(g!==void 0?p=g():p=r.value,!c||!p)return;p.hasAttribute(L)&&p.removeAttribute(L);const{children:M}=c,$=c.offsetWidth,s=[],u=e.tail?d==null?void 0:d():null;let b=u?u.offsetWidth:0,m=!1;const l=c.children.length-(e.tail?1:0);for(let v=0;v<l-1;++v){if(v<0)continue;const z=M[v];if(m){z.hasAttribute(L)||z.setAttribute(L,"");continue}else z.hasAttribute(L)&&z.removeAttribute(L);const I=z.offsetWidth;if(b+=I,s[v]=I,b>$){const{updateCounter:f}=n;for(let a=v;a>=0;--a){const y=l-1-a;f!==void 0?f(y):p.textContent=`${y}`;const x=p.offsetWidth;if(b-=s[a],b+x<=$||a===0){m=!0,v=a-1,u&&(v===-1?(u.style.maxWidth=`${$-x}px`,u.style.boxSizing="border-box"):u.style.maxWidth="");break}}}}const{onUpdateOverflow:i}=n;m?i!==void 0&&i(!0):(i!==void 0&&i(!1),p.setAttribute(L,""))}const h=Z();return Ze.mount({id:"vueuc/overflow",head:!0,anchorMetaName:R,ssr:h}),_(o),{selfRef:t,counterRef:r,sync:o}},render(){const{$slots:n}=this;return ce(this.sync),T("div",{class:"v-overflow",ref:"selfRef"},[pe(n,"default"),n.counter?n.counter():T("span",{style:{display:"inline-block"},ref:"counterRef"}),n.tail?n.tail():null])}});function be(n){return n instanceof HTMLElement}function ge(n){for(let e=0;e<n.childNodes.length;e++){const t=n.childNodes[e];if(be(t)&&(we(t)||ge(t)))return!0}return!1}function ye(n){for(let e=n.childNodes.length-1;e>=0;e--){const t=n.childNodes[e];if(be(t)&&(we(t)||ye(t)))return!0}return!1}function we(n){if(!Re(n))return!1;try{n.focus()}catch{}return document.activeElement===n}function Re(n){if(n.tabIndex>0||n.tabIndex===0&&n.getAttribute("tabIndex")!==null)return!0;if(n.getAttribute("disabled"))return!1;switch(n.nodeName){case"A":return!!n.href&&n.rel!=="ignore";case"INPUT":return n.type!=="hidden"&&n.type!=="file";case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}}let W=[];const ct=C({name:"FocusTrap",props:{disabled:Boolean,active:Boolean,autoFocus:{type:Boolean,default:!0},onEsc:Function,initialFocusTo:String,finalFocusTo:String,returnFocusOnDeactivated:{type:Boolean,default:!0}},setup(n){const e=Se(),t=F(null),r=F(null);let o=!1,h=!1;const c=document.activeElement;function g(){return W[W.length-1]===e}function d(l){var i;l.code==="Escape"&&g()&&((i=n.onEsc)===null||i===void 0||i.call(n))}_(()=>{H(()=>n.active,l=>{l?($(),U("keydown",document,d)):(X("keydown",document,d),o&&s())},{immediate:!0})}),Q(()=>{X("keydown",document,d),o&&s()});function p(l){if(!h&&g()){const i=M();if(i===null||i.contains(l.target))return;u("first")}}function M(){const l=t.value;if(l===null)return null;let i=l;for(;i=i.nextSibling,!(i===null||i instanceof Element&&i.tagName==="DIV"););return i}function $(){var l;if(!n.disabled){if(W.push(e),n.autoFocus){const{initialFocusTo:i}=n;i===void 0?u("first"):(l=ie(i))===null||l===void 0||l.focus()}o=!0,document.addEventListener("focus",p,!0)}}function s(){var l;if(n.disabled||(document.removeEventListener("focus",p,!0),W=W.filter(v=>v!==e),g()))return;const{finalFocusTo:i}=n;i!==void 0?(l=ie(i))===null||l===void 0||l.focus():n.returnFocusOnDeactivated&&c instanceof HTMLElement&&(h=!0,c.focus({preventScroll:!0}),h=!1)}function u(l){if(!!g()&&n.active){const i=t.value,v=r.value;if(i!==null&&v!==null){const z=M();if(z==null||z===v){h=!0,i.focus({preventScroll:!0}),h=!1;return}h=!0;const I=l==="first"?ge(z):ye(z);h=!1,I||(h=!0,i.focus({preventScroll:!0}),h=!1)}}}function b(l){if(h)return;const i=M();i!==null&&(l.relatedTarget!==null&&i.contains(l.relatedTarget)?u("last"):u("first"))}function m(l){h||(l.relatedTarget!==null&&l.relatedTarget===t.value?u("last"):u("first"))}return{focusableStartRef:t,focusableEndRef:r,focusableStyle:"position: absolute; height: 0; width: 0;",handleStartFocus:b,handleEndFocus:m}},render(){const{default:n}=this.$slots;if(n===void 0)return null;if(this.disabled)return n();const{active:e,focusableStyle:t}=this;return T(fe,null,[T("div",{"aria-hidden":"true",tabindex:e?"0":"-1",ref:"focusableStartRef",style:t,onFocus:this.handleStartFocus}),n(),T("div",{"aria-hidden":"true",style:t,ref:"focusableEndRef",tabindex:e?"0":"-1",onFocus:this.handleEndFocus})])}});export{ct as F,Ne as L,ae as V,ft as a,dt as b,ut as c,at as d,ht as e};
