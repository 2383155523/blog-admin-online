{"version":3,"file":"index.a8c40ce1.js","sources":["../../src/components/admin/routeContent/components/editBlogArticle/index.vue"],"sourcesContent":["<script setup lang=\"ts\">\r\nimport { ref, onMounted } from \"vue\";\r\nimport { IFullscreenIn, IFullscreenOut } from \"@cop/Icons\";\r\nimport { useStore } from \"vuex\";\r\nimport { NInput, NSelect, NButton, useDialog } from \"naive-ui\";\r\nimport { setStorage, getStorage } from \"@/util/cache\";\r\n\r\nconst store = useStore();\r\nconst dialog = useDialog();\r\nconst preview = ref<null | HTMLElement>(null);\r\nconst blogContent = ref<null | HTMLElement>(null);\r\nconst isFullScreenIn = ref<boolean>(false);\r\nconst title = ref<null | string>(null);\r\nconst classify = ref(null);\r\nconst classifys = ref([\r\n  // {\r\n  //   label: \"js\",\r\n  //   value: \"js\",\r\n  // },\r\n  // {\r\n  //   label: \"vue\",\r\n  //   value: \"vue\",\r\n  // },\r\n  // {\r\n  //   label: \"es6\",\r\n  //   value: \"es6\",\r\n  // },\r\n  // {\r\n  //   label: \"css\",\r\n  //   value: \"css\",\r\n  // },\r\n]);\r\n\r\nconst tag = ref(null);\r\n\r\nconst tags = ref([\r\n  {\r\n    label: \"js\",\r\n    value: \"js\",\r\n  },\r\n  {\r\n    label: \"vue\",\r\n    value: \"vue\",\r\n  },\r\n  {\r\n    label: \"es6\",\r\n    value: \"es6\",\r\n  },\r\n  {\r\n    label: \"css\",\r\n    value: \"css\",\r\n  },\r\n]);\r\n\r\nconst fullScreen = () => {\r\n  isFullScreenIn.value = !isFullScreenIn.value;\r\n};\r\n\r\nconst write = (e) => {\r\n  preview.value.innerHTML = e.target.value;\r\n  setStorage(\"blogContent\", e.target.value);\r\n};\r\n\r\nconst backtrackBlogContent = () => {\r\n  //回溯上次博客编辑内容\r\n  const content = getStorage(\"blogContent\");\r\n\r\n  if (content) {\r\n    dialog.info({\r\n      title: \"回溯博文\",\r\n      content: \"是否回溯博文?\",\r\n      positiveText: \"是\",\r\n      negativeText: \"算了\",\r\n      onPositiveClick: () => {\r\n        blogContent.value.value = content;\r\n        preview.value.innerHTML = content;\r\n      },\r\n      onNegativeClick: () => {},\r\n    });\r\n  }\r\n};\r\nonMounted(() => {\r\n  backtrackBlogContent(); //回溯上次博客编辑内容\r\n});\r\n</script>\r\n\r\n<template>\r\n  <div class=\"editOuterContainer\">\r\n    <div\r\n      class=\"editBox\"\r\n      :class=\"{\r\n        FullScreen: isFullScreenIn,\r\n      }\"\r\n      @keyup.esc=\"isFullScreenIn = false\"\r\n    >\r\n      <div class=\"writeBox\">\r\n        <textarea\r\n          name=\"write\"\r\n          class=\"write\"\r\n          spellcheck=\"false\"\r\n          ref=\"blogContent\"\r\n          @input=\"write\"\r\n          placeholder=\"writing something !\"\r\n          :style=\"{\r\n            background: store.state.theme == 'light' ? '#fff' : '#333',\r\n            color: store.state.theme == 'light' ? '#333' : '#fff',\r\n            'border-color':\r\n              store.state.theme == 'light' ? '#dddddd' : '#575050',\r\n          }\"\r\n          :class=\"{\r\n            FullScreen2: isFullScreenIn,\r\n          }\"\r\n        ></textarea>\r\n      </div>\r\n      <div\r\n        class=\"previewBox\"\r\n        ref=\"preview\"\r\n        :style=\"{\r\n          background: store.state.theme == 'light' ? '#fff' : '#333',\r\n          color: store.state.theme == 'light' ? '#333' : '#fff',\r\n        }\"\r\n        :class=\"{\r\n          FullScreen2: isFullScreenIn,\r\n        }\"\r\n      ></div>\r\n      <div class=\"fullScreenIcon\">\r\n        <i-fullscreen-out\r\n          size=\"22\"\r\n          :color=\"store.state.theme == 'light' ? '#333' : '#fff'\"\r\n          v-if=\"isFullScreenIn\"\r\n          @click=\"fullScreen\"\r\n        />\r\n        <i-fullscreen-in\r\n          size=\"22\"\r\n          :color=\"store.state.theme == 'light' ? '#333' : '#fff'\"\r\n          v-else\r\n          @click=\"fullScreen\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"options\">\r\n      <div class=\"title\">\r\n        <n-input v-model:value=\"title\" type=\"text\" placeholder=\"Title\" />\r\n      </div>\r\n      <div class=\"classify\">\r\n        <n-select\r\n          v-model:value=\"classify\"\r\n          :options=\"classifys\"\r\n          :loading=\"false\"\r\n          placeholder=\"Classify\"\r\n        />\r\n      </div>\r\n      <div class=\"tag\">\r\n        <n-select\r\n          v-model:value=\"tag\"\r\n          multiple\r\n          :options=\"tags\"\r\n          :loading=\"false\"\r\n          placeholder=\"Tag\"\r\n          :clearable=\"true\"\r\n        />\r\n      </div>\r\n      <div class=\"submit\">\r\n        <n-button type=\"warning\" class=\"btn\">暂存</n-button>\r\n        <n-button type=\"primary\" class=\"btn\">发布</n-button>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<style lang=\"scss\" scoped>\r\n.FullScreen2 {\r\n  border-radius: 0 !important;\r\n}\r\n.FullScreen {\r\n  position: fixed !important;\r\n  top: 0 !important;\r\n  left: 0 !important;\r\n  width: 100vw !important;\r\n  height: 100vh !important;\r\n  z-index: 999 !important;\r\n}\r\n.editOuterContainer {\r\n  width: 100%;\r\n  height: 100%;\r\n  border-radius: 4px;\r\n\r\n  .options {\r\n    width: 100%;\r\n    height: 10%;\r\n    // background: #fff;\r\n    display: flex;\r\n    align-items: center;\r\n\r\n    .title {\r\n      flex: 3;\r\n      margin-right: 50px;\r\n    }\r\n    .classify {\r\n      flex: 2;\r\n      margin-right: 50px;\r\n    }\r\n    .tag {\r\n      flex: 2;\r\n    }\r\n    .submit {\r\n      flex: 3;\r\n      text-align: right;\r\n      .btn {\r\n        width: 200px;\r\n        margin-left: 35px;\r\n      }\r\n    }\r\n  }\r\n  .editBox {\r\n    width: 100%;\r\n    max-width: 100%;\r\n    height: 90%;\r\n    display: flex;\r\n    position: relative;\r\n    .writeBox {\r\n      width: 50%;\r\n      height: 100%;\r\n      .write {\r\n        width: 100%;\r\n        max-width: 100%;\r\n        height: 100%;\r\n        border-radius: 4px;\r\n        border-top-right-radius: 0;\r\n        border-bottom-right-radius: 0;\r\n        border: none;\r\n        font-size: 16px;\r\n        padding: 10px;\r\n        box-sizing: border-box;\r\n        resize: none;\r\n        outline: none;\r\n        font-family: \"fira-code\" !important;\r\n        border-right-width: 2px;\r\n        border-right-style: solid;\r\n        overflow-x: hidden;\r\n        word-break: break-all;\r\n        transition: all 0.3s var(--n-bezier);\r\n      }\r\n    }\r\n    .previewBox {\r\n      transition: all 0.3s var(--n-bezier);\r\n      width: 50%;\r\n      height: 100%;\r\n      // text-align: center;\r\n      border-top-right-radius: 4px;\r\n      border-bottom-right-radius: 4px;\r\n      overflow-y: auto;\r\n      overflow-x: hidden;\r\n      box-sizing: border-box;\r\n      padding: 10px;\r\n      // padding-top: 25px;\r\n      word-break: break-all;\r\n    }\r\n    .fullScreenIcon {\r\n      display: inline-block;\r\n      position: absolute;\r\n      top: 5px;\r\n      right: 5px;\r\n      z-index: 2;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"names":[],"mappings":"+fAOM,GAAQ,IACR,EAAS,IACT,EAAU,EAAwB,MAClC,EAAc,EAAwB,MACtC,EAAiB,EAAa,IAC9B,EAAQ,EAAmB,MAC3B,EAAW,EAAI,MACf,EAAY,EAAI,IAmBhB,EAAM,EAAI,MAEV,EAAO,EAAI,CACf,CACE,MAAO,KACP,MAAO,MAET,CACE,MAAO,MACP,MAAO,OAET,CACE,MAAO,MACP,MAAO,OAET,CACE,MAAO,MACP,MAAO,SAIL,EAAa,IAAM,GACR,MAAQ,CAAC,EAAe,OAGnC,EAAQ,AAAC,GAAM,GACX,MAAM,UAAY,EAAE,OAAO,QACxB,cAAe,EAAE,OAAO,QAG/B,EAAuB,IAAM,MAE3B,GAAU,EAAW,eAEvB,KACK,KAAK,CACV,MAAO,2BACP,QAAS,wCACT,aAAc,SACd,aAAc,eACd,gBAAiB,IAAM,GACT,MAAM,MAAQ,IAClB,MAAM,UAAY,GAE5B,gBAAiB,IAAM,eAInB,IAAM"}